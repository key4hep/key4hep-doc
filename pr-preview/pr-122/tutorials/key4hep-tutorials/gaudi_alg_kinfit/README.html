<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Replacing an existing Marlin processor with a Gaudi algorithm &mdash; Key4hep  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="How to run multithreading with k4MarlinWrapper (Gaudi)" href="../../k4marlinwrapper/doc/starterkit/k4MarlinWrapperCLIC/howtoMultithread.html" />
    <link rel="prev" title="Running ILD simulation and reconstruction" href="../gaudi_ild_reco/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Key4hep
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/help.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/setup.html">Getting key4hep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/CONTRIBUTING.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../how-tos/README.html">Key4hep How-Tos and Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../README.html">Key4hep Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../k4marlinwrapper/doc/starterkit/k4MarlinWrapperCLIC/Readme.html">Using the Key4hep-Stack for CLIC Simulation and Reconstruction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gaudi_ild_reco/README.html">Running ILD simulation and reconstruction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Replacing an existing Marlin processor with a Gaudi algorithm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-data">Input data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-standard-ild-full-simulation-and-reconstruction">Running standard ILD full simulation and reconstruction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simulation">Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reconstruction">Reconstruction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-gaudi-algorithm">Writing a Gaudi algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-tutorial">Setting up tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-the-filter-algorithm">Writing the Filter algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-testing-the-filter-algorithm">Using / testing the Filter algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-the-gammagammacandidatefinder-algorithm">Writing the <code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pi0-gammagamma-analysis">Pi0 / GammaGamma analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replace-wrapped-processor-with-new-algorithms">Replace wrapped processor with new algorithms</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../k4marlinwrapper/doc/starterkit/k4MarlinWrapperCLIC/howtoMultithread.html">How to run multithreading with k4MarlinWrapper (Gaudi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../k4marlinwrapper/doc/starterkit/k4MarlinWrapperCLIC/CEDViaWrapper.html">Running an Event Display with EDM4hep or LCIO input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../k4simdelphes/doc/starterkit/k4SimDelphes/Readme.html">Running Delphes fast simulation with EDM4hep output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developing-key4hep-software/README.html">Developing Key4hep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spack-build-instructions-for-librarians/README.html">Building Key4hep: For Librarians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../talks-and-presentations/README.html">Talks and Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../call-for-logos/README.html">Call for logos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://cern.ch/fccsw">FCC software</a></li>
<li class="toctree-l1"><a class="reference external" href="https://twiki.cern.ch/twiki/bin/view/CLIC/CLICSoftwareComputing">CLIC software</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ilcsoft.desy.de/portal">ILC software</a></li>
<li class="toctree-l1"><a class="reference external" href="http://cepcsoft.ihep.ac.cn/">CEPC software</a></li>
<li class="toctree-l1"><a class="reference external" href="https://mcd-wiki.web.cern.ch/software/">Muon Collider software</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Key4hep</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../README.html">Key4hep Tutorials</a></li>
      <li class="breadcrumb-item active">Replacing an existing Marlin processor with a Gaudi algorithm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tutorials/key4hep-tutorials/gaudi_alg_kinfit/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="replacing-an-existing-marlin-processor-with-a-gaudi-algorithm">
<h1>Replacing an existing Marlin processor with a Gaudi algorithm<a class="headerlink" href="#replacing-an-existing-marlin-processor-with-a-gaudi-algorithm" title="Link to this heading"></a></h1>
<p>In this tutorial we are going to explore how to run a (very simple) kinematic
fit inside Gaudi. The final goal is to replace an existing Marlin processor in
the full ILD reconstruction chain with a newly developed (set of) Gaudi
algorithm(s).</p>
<p>In the course of this tutorial you will see how to</p>
<ul class="simple">
<li><p>Run the standard simulation and reconstruction for ILD using Gaudi</p></li>
<li><p>Write your own Gaudi algorithm using an existing Marlin processor as a
template</p></li>
<li><p>Run and test this algorithm in isolation</p></li>
<li><p>Do some analysis and validation on the outputs of the newly developed
algorithm</p></li>
<li><p>Replace the original (wrapped) Marlin Processor with the newly developed
algorithm</p></li>
</ul>
<p>One of the key goals of this tutorial are to</p>
<ul class="simple">
<li><p>Show how to use and combine existing SW tools from the linear collider (LC)
stack with Gaudi</p></li>
<li><p>Highlight a few of the common pitfalls that one potentially encounters when
doing so</p></li>
</ul>
<p>The tutorial is structured such that it should be possible to follow this as a
standalone exercise. It was developed originally for the <a class="reference external" href="https://agenda.linearcollider.org/event/10594/">LCWS
2025</a> where it was also given as
an in person exercise. The estimated time for completion there was 3 hours
including some general introduction to Gaudi.</p>
<section id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Link to this heading"></a></h2>
<p>The tutorial assumes that you are familiar with the basics of Gaudi as well as
c++ and python. You should have heard of <em>Functional</em> algorithms in this context
and at least have some vague conceptual understanding of what they are.</p>
<p>We also assume a basic understanding of <a class="reference external" href="https://edm4hep.web.cern.ch">EDM4hep</a>
and <a class="reference external" href="https://key4hep.web.cern.ch/podio">podio</a>, but we try in all cases to give
at least a very basic introduction or at least some pointers to relevant
information.</p>
<p>We have tested the instructions for this tutorial to run against a Key4hep
software environment deployed via CVMFS (e.g. on <em>lxplus</em> or the <em>NAF</em>). It will
also work if you have CVMFS installed locally and run a supported OS for
Key4hep.</p>
</section>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading"></a></h2>
<p>You can follow this tutorial in two ways, either you use a CVMFS installation
(available for Ubuntu24 and Alma9, e.g. via <code class="docutils literal notranslate"><span class="pre">lxplus</span></code> or the <code class="docutils literal notranslate"><span class="pre">NAF</span></code>) or you use a
dedicated container image that we have created for this purpose.</p>
<p>If you haven’t done so already, source a Key4hep software environment via</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="cvmfs-setup" for="sd-tab-item-0">
CVMFS installation</label><div class="sd-tab-content docutils">
<p>Login into your favorite system (or use a local CVMFS installation) and source
the following setup script.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/cvmfs/sw-nightlies.hsf.org/key4hep/setup.sh
</pre></div>
</div>
<p>For the remainder of the tutorial we will also assume that you are working
within some tutorial directory. We will refer to this with the
<code class="docutils literal notranslate"><span class="pre">TUTORIAL_BASE_DIR</span></code> environment variable, something along the lines of</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd &lt;path/where/you/have/some/space&gt;</span>
mkdir<span class="w"> </span>tutorial_lcws
<span class="nb">cd</span><span class="w"> </span>tutorial_lcws
<span class="nb">export</span><span class="w"> </span><span class="nv">TUTORIAL_BASE_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="container-setup-docker" for="sd-tab-item-1">
Container image (docker)</label><div class="sd-tab-content docutils">
<p>For the remainder of the tutorial we will also assume that you are working
within some tutorial directory. We will refer to this with the
<code class="docutils literal notranslate"><span class="pre">TUTORIAL_BASE_DIR</span></code> environment variable. Using the commands below this will all
be done for you and launch the container appropriately.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd &lt;path/where/you/have/some/space&gt;</span>
mkdir<span class="w"> </span>tutorial_lcws
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/tutorial_lcws:/resources/tutorial_lcws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">TUTORIAL_BASE_DIR</span><span class="o">=</span>/resources/tutorial_lcws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ghcr.io/key4hep/key4hep-sim-reco-ubuntu24:lcws-tutorial
</pre></div>
</div>
<p>This will immediately drop you into a Key4hep environment that is usable for
this tutorial.</p>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="container-setup-apptainer" for="sd-tab-item-2">
Container image (apptainer)</label><div class="sd-tab-content docutils">
<p>For the remainder of the tutorial we will also assume that you are working
within some tutorial directory. We will refer to this with the
<code class="docutils literal notranslate"><span class="pre">TUTORIAL_BASE_DIR</span></code> environment variable. Using the commands below this will all
be done for you and launch the container appropriately.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd &lt;path/where/you/have/some/space&gt;</span>
mkdir<span class="w"> </span>tutorial_lcws
apptainer<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-B<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/tutorial_lcws:/resources/tutorial_lcws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--env<span class="w"> </span><span class="nv">TUTORIAL_BASE_DIR</span><span class="o">=</span>/resources/tutorial_lcws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>docker://ghcr.io/key4hep/key4hep-sim-reco-ubuntu24:lcws-tutorial
</pre></div>
</div>
</div>
</div>
<section id="input-data">
<h3>Input data<a class="headerlink" href="#input-data" title="Link to this heading"></a></h3>
<p>For some of the steps it will be useful to have some input files with more
statistics. Since running full simulation and reconstruction takes a
considerable amount of time for these, we have prepared these files in advance.
We will describe the contents of these input files in more detail a bit furher
below. To easily refer to these resources we will also assume that the
<code class="docutils literal notranslate"><span class="pre">RESOURCE_DIR</span></code> environment variable points to these input files</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="non-lxplus" for="sd-tab-item-3">
Locally or not on lxplus</label><div class="sd-tab-content docutils">
<p>If you are running on a workgroup server other than <code class="docutils literal notranslate"><span class="pre">lxplus</span></code> (e.g. on the NAF)
or locally, e.g. using a container, you need to download some files first via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span><span class="si">${</span><span class="nv">TUTORIAL_BASE_DIR</span><span class="si">}</span>/resources
<span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">TUTORIAL_BASE_DIR</span><span class="si">}</span>/resources
<span class="nb">export</span><span class="w"> </span><span class="nv">RESOURCE_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
wget<span class="w"> </span>https://key4hep.web.cern.ch/tutorial/gen_tau_filtered/gen_tau_pi0_250-SetA_2f_leptonic_eL_pR.slcio
wget<span class="w"> </span>https://key4hep.web.cern.ch/tutorial/gen_tau_filtered/gen_tau_pi0_250-SetA_2f_leptonic_eL_pR_REC_0.edm4hep.root
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="lxplus" for="sd-tab-item-4">
lxplus</label><div class="sd-tab-content docutils">
<p>If you are running on <code class="docutils literal notranslate"><span class="pre">lxplus</span></code>, you should have access to the <em>EOS</em> filesystem
and you can simply use that via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">RESOURCE_DIR</span><span class="o">=</span>/eos/project/k/key4hep/www/key4hep/tutorial/gen_tau_filtered
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">gen_tau_pi0_250-SetA_2f_leptonic_eL_pR.slcio</span></code> file contains a skim of
events from the <code class="docutils literal notranslate"><span class="pre">2f_leptonic</span></code> samples of the MC-2020 production, selecting only
events with at least one hadronically decaying tau resulting in at least one
neutral pion. Additionally, at least one of the photons from the pi0 decay has
to have an energy of more than 10 GeV.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gen_tau_pi0_250-SetA_2f_leptonic_eL_pR_REC_0.edm4hep.root</span></code> contains a few
hundred events simulated and reconstructed via the ILD standard chain. It only
contains a filtered down event content, which should allow you to test the
algorithms you develop with a few hundred events to also give some more
meaningful plots. More files similar to this are available by simply replacing
the <code class="docutils literal notranslate"><span class="pre">0</span></code> with numbers up to <code class="docutils literal notranslate"><span class="pre">9</span></code>. However, for the purpose of this tutorial one
file should suffice.</p>
</section>
</section>
<section id="running-standard-ild-full-simulation-and-reconstruction">
<h2>Running standard ILD full simulation and reconstruction<a class="headerlink" href="#running-standard-ild-full-simulation-and-reconstruction" title="Link to this heading"></a></h2>
<p>In order to run the standard ILD full simulation and reconstruction we first
have to fetch the necessary configuration files by cloning
<a class="reference external" href="https://github.com/iLCSoft/ILDConfig">ILDConfig</a>. We also create another anchor
for later; <code class="docutils literal notranslate"><span class="pre">ILDCONFIG_DIR</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">TUTORIAL_BASE_DIR</span><span class="si">}</span>
git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="o">=</span><span class="m">1</span><span class="w"> </span>https://github.com/iLCSoft/ILDConfig
<span class="nb">cd</span><span class="w"> </span>ILDConfig/StandardConfig/production
<span class="nb">export</span><span class="w"> </span><span class="nv">ILDCONFIG_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</pre></div>
</div>
<section id="simulation">
<h3>Simulation<a class="headerlink" href="#simulation" title="Link to this heading"></a></h3>
<p>It is now possible to run the simulation using the input file that is available
from the <code class="docutils literal notranslate"><span class="pre">RESOURCE_DIR</span></code> (see <a class="reference internal" href="#setup">above</a>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$ILDCONFIG_DIR</span>
ddsim<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--inputFiles<span class="w"> </span><span class="si">${</span><span class="nv">RESOURCE_DIR</span><span class="si">}</span>/gen_tau_pi0_250-SetA_2f_leptonic_eL_pR.slcio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--outputFile<span class="w"> </span>gen_tau_pi0_SIM.root<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--compactFile<span class="w"> </span><span class="nv">$k4geo_DIR</span>/ILD/compact/ILD_l5_v02/ILD_l5_v02.xml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--steeringFile<span class="w"> </span>ddsim_steer.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-N<span class="w"> </span><span class="m">20</span>
</pre></div>
</div>
<p>This will take roughly 2-3 minutes depending on the machine where you are
running this on. Feel free to leave this running while you read on for the next
steps.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input file contains around 6.8k events. However, given that it takes a few
seconds per event to fully simulate them we limit the number of events we
simulate to 20 here. Fully simulated files with more events are also available,
but for developing and some first tests of the later steps these 20 events
should suffice.</p>
</div>
</section>
<section id="reconstruction">
<h3>Reconstruction<a class="headerlink" href="#reconstruction" title="Link to this heading"></a></h3>
<p>For reconstruction we use the standard configuration for ILD:
<a class="reference external" href="https://github.com/iLCSoft/ILDConfig/blob/master/StandardConfig/production/ILDReconstruction.py"><code class="docutils literal notranslate"><span class="pre">ILDReconstruction.py</span></code></a></p>
<p>We will not go into too much detail of this for this tutorial. However, since it
will become relevant later we do briefly mention the basic capabilities and
principles of this configuration. The first thing to note is that this is a
fairly large configuration, not least due to the fact, that it is also fairly
configurable.</p>
<ul class="simple">
<li><p>It can transparently handle EDM4hep and LCIO inputs as well as produce either
(or both) of them.</p></li>
<li><p>The detector geometry to run over is configurable from the command line. It
will also automatically switch to a different set of algorithms in case a
geometry that is targetting FCCee is found</p></li>
<li><p>Different reconstruction options can be toggled as well</p></li>
</ul>
<p>The algorithms that are run are almost exclusively <em>Marlin Processors</em> that are
run via the <em>MarlinProcessorWrapper</em> algorithm. We refer to the <a class="reference external" href="https://key4hep.github.io/key4hep-doc/main/how-tos/k4marlinwrapper/doc/MarlinWrapperIntroduction.html">comprehensive
documentation</a>
for more details.</p>
<p>One key aspect is that not all of the algorithms are configured in the top level
<code class="docutils literal notranslate"><span class="pre">ILDReconstruction.py</span></code> file. Rather it is split into smaller logically grouped
sequences of algorithms that are dynamically imported, depending on the value of
some other configuration parameters. This is done via the
<a class="reference external" href="https://github.com/iLCSoft/ILDConfig/blob/38860c2a63c2586845f81e78a21d0c3ddbb6afe9/StandardConfig/production/py_utils.py#L81"><code class="docutils literal notranslate"><span class="pre">SequenceLoader</span></code></a>
helper class. The exact details are not extremely relevant for the purposes of
the rest of the tutorial. The main thing to understand is that e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sequenceLoader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;HighLevelReco/HighLevelReco&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will import the contents of the
<a class="reference external" href="https://github.com/iLCSoft/ILDConfig/blob/master/StandardConfig/production/HighLevelReco/HighLevelReco.py"><code class="docutils literal notranslate"><span class="pre">HighLevelReco/HighLevelReco.py</span></code></a>
file. As you can see this file defines and configures a few high level
reconstruction algorithms and defines their running order in the final
<code class="docutils literal notranslate"><span class="pre">HighLevelRecoSequence</span></code> list at the bottom of the file.</p>
<p>Now that we have a basic understanding of the structure of the ILD
reconstrucion, we can run it via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$ILDCONFIG_DIR</span>
k4run<span class="w"> </span>ILDReconstruction.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--inputFiles<span class="o">=</span>gen_tau_pi0_SIM.root<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--compactFile<span class="w"> </span><span class="nv">$k4geo_DIR</span>/ILD/compact/ILD_l5_v02/ILD_l5_o1_v02.xml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--outputFileBase<span class="o">=</span>gen_tau_pi0<span class="w">  </span><span class="se">\</span>
<span class="w">  </span>--num-events<span class="o">=</span>-1
</pre></div>
</div>
<p>You should now have a few output files, something like</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls<span class="w"> </span>-lh<span class="w"> </span>gen_tau_pi0*
<span class="go">-rw-r--r--. 1 madlener af-ilc 23K Oct 10 20:08 gen_tau_pi0_AIDA.root</span>
<span class="go">-rw-r--r--. 1 madlener af-ilc 29K Oct 10 20:08 gen_tau_pi0_PfoAnalysis.root</span>
<span class="go">-rw-r--r--. 1 madlener af-ilc 45M Oct 10 20:08 gen_tau_pi0_REC.edm4hep.root</span>
<span class="go">-rw-r--r--. 1 madlener af-ilc 44M Oct 10 20:08 gen_tau_pi0_SIM.root</span>
</pre></div>
</div>
<p>The one that we are mainly interested in for the rest of the tutorial is
<code class="docutils literal notranslate"><span class="pre">gen_tau_pi0_REC.edm4hep.root</span></code>. This is the EDM4hep output of the full
simulation. We can investigate the contents of the edm4hep files on a high level
using the <a class="reference external" href="https://key4hep.github.io/key4hep-doc/main/how-tos/key4hep-tutorials/edm4hep_analysis/edm4hep_api_intro.html#podio-dump"><code class="docutils literal notranslate"><span class="pre">podio-dump</span></code>
tool</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>podio-dump<span class="w"> </span>gen_tau_pi0_REC.edm4hep.root
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<code class="docutils literal notranslate"><span class="pre">podio-dump</span></code> Output<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="n">file</span><span class="p">:</span> <span class="n">gen_tau_pi0_REC</span><span class="o">.</span><span class="n">edm4hep</span><span class="o">.</span><span class="n">root</span>
            <span class="p">(</span><span class="n">written</span> <span class="k">with</span> <span class="n">podio</span> <span class="n">version</span><span class="p">:</span> <span class="mf">1.5.0</span><span class="p">)</span>

<span class="n">datamodel</span> <span class="n">model</span> <span class="n">definitions</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">file</span><span class="p">:</span>
 <span class="o">-</span> <span class="n">edm4hep</span> <span class="p">(</span><span class="mf">0.99.99</span><span class="p">)</span>

<span class="n">Frame</span> <span class="n">categories</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">file</span><span class="p">:</span>
<span class="n">Name</span>                    <span class="n">Entries</span>  
<span class="o">----------------------</span>  <span class="o">-------</span>  
<span class="n">metadata</span>                <span class="mi">1</span>        
<span class="n">events</span>                  <span class="mi">20</span>       
<span class="n">configuration_metadata</span>  <span class="mi">1</span>        
<span class="c1">################################### events: 0 ####################################</span>
<span class="n">Collections</span><span class="p">:</span>
<span class="n">Name</span>                                            <span class="n">ValueType</span>                                                        <span class="n">Size</span>   <span class="n">ID</span>        
<span class="o">----------------------------------------------</span>  <span class="o">---------------------------------------------------------------</span>  <span class="o">-----</span>  <span class="o">--------</span>  
<span class="n">BCAL</span>                                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="n">f6ebd0e3</span>  
<span class="n">BeamCalCollection</span>                               <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">0</span>      <span class="n">c298a348</span>  
<span class="n">BeamCalCollectionContributions</span>                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="n">a1b6cac8</span>  
<span class="n">BuildUpVertex</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">1</span>      <span class="mi">4</span><span class="n">b3ce322</span>  
<span class="n">BuildUpVertex_associatedParticles</span>               <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">1</span>      <span class="mi">778</span><span class="n">fbf01</span>  
<span class="n">BuildUpVertex_RP</span>                                <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">1</span>      <span class="n">c1ce60c0</span>  
<span class="n">BuildUpVertex_RP_startVertices</span>                  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">b481ddb3</span>  
<span class="n">BuildUpVertex_V0</span>                                <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">0</span>      <span class="mi">77941</span><span class="n">bb6</span>  
<span class="n">BuildUpVertex_V0_associatedParticles</span>            <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">ff218acc</span>  
<span class="n">BuildUpVertex_V0_RP</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="mi">5784</span><span class="n">a361</span>  
<span class="n">BuildUpVertex_V0_RP_startVertices</span>               <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">cb7e0119</span>  
<span class="n">ClupatraTracks</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="mi">264</span><span class="n">d1493</span>  
<span class="n">ClupatraTracks_dQdx</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="mi">5</span><span class="n">acc110a</span>  
<span class="n">ClupatraTrackSegments</span>                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">0</span>      <span class="n">c80f6454</span>  
<span class="n">ClupatraTrackSegments_dQdx</span>                      <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">0</span>      <span class="n">a2098c13</span>  
<span class="n">ClusterMCTruthLink</span>                              <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Cluster</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                <span class="mi">17</span>     <span class="n">e2727d90</span>  
<span class="n">DistilledPFOs</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">6</span>      <span class="n">dfdcddaf</span>  
<span class="n">EcalBarrelCollection</span>                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">3076</span>   <span class="mi">62</span><span class="n">f19310</span>  
<span class="n">EcalBarrelCollectionDigi</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">2523</span>   <span class="mi">37</span><span class="n">ae0fab</span>  
<span class="n">EcalBarrelCollectionGapHits</span>                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">57</span>     <span class="mb">0b0</span><span class="mi">263</span><span class="n">f2</span>  
<span class="n">EcalBarrelCollectionRec</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">2523</span>   <span class="mi">287</span><span class="n">ce0a9</span>  
<span class="n">EcalBarrelRelationsSimDigi</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">2523</span>   <span class="mi">9</span><span class="n">d52130b</span>  
<span class="n">EcalBarrelRelationsSimRec</span>                       <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">2523</span>   <span class="n">df5574a9</span>  
<span class="n">ECalBarrelScHitsEvenContributions</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">21239</span>  <span class="n">c8d02283</span>  
<span class="n">ECalBarrelScHitsOddContributions</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">20998</span>  <span class="mi">2</span><span class="n">b8dc170</span>  
<span class="n">ECalBarrelSiHitsEven</span>                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">1503</span>   <span class="mi">4316638</span><span class="n">a</span>  
<span class="n">ECalBarrelSiHitsEvenContributions</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">23555</span>  <span class="mi">7</span><span class="n">aeff7cb</span>  
<span class="n">ECalBarrelSiHitsOdd</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">1573</span>   <span class="mi">9</span><span class="n">ebccc5c</span>  
<span class="n">ECalBarrelSiHitsOddContributions</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">25262</span>  <span class="n">dc73e57f</span>  
<span class="n">EcalEndcapRingCollection</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">0</span>      <span class="n">cdf19862</span>  
<span class="n">EcalEndcapRingCollectionContributions</span>           <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="n">a7ec6089</span>  
<span class="n">EcalEndcapRingCollectionDigi</span>                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="n">b142d1dc</span>  
<span class="n">EcalEndcapRingCollectionRec</span>                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="n">e2e8649e</span>  
<span class="n">EcalEndcapRingRelationsSimDigi</span>                  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mf">93e02071</span>  
<span class="n">EcalEndcapRingRelationsSimRec</span>                   <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mi">730</span><span class="n">bad7f</span>  
<span class="n">ECalEndcapScHitsEvenContributions</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">37</span>     <span class="mi">65</span><span class="n">d77aa2</span>  
<span class="n">ECalEndcapScHitsOddContributions</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">15</span>     <span class="mi">9</span><span class="n">b0f4634</span>  
<span class="n">EcalEndcapsCollection</span>                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">6</span>      <span class="n">d6d26d20</span>  
<span class="n">EcalEndcapsCollectionDigi</span>                       <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">1</span>      <span class="mi">5</span><span class="n">f384992</span>  
<span class="n">EcalEndcapsCollectionGapHits</span>                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="n">d6a16810</span>  
<span class="n">EcalEndcapsCollectionRec</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">1</span>      <span class="mi">0485</span><span class="n">d5e2</span>  
<span class="n">ECalEndcapSiHitsEven</span>                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">3</span>      <span class="mi">42</span><span class="n">edbbbd</span>  
<span class="n">ECalEndcapSiHitsEvenContributions</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">18</span>     <span class="mi">9</span><span class="n">bf74d0a</span>  
<span class="n">ECalEndcapSiHitsOdd</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">3</span>      <span class="mi">1</span><span class="n">c39453c</span>  
<span class="n">ECalEndcapSiHitsOddContributions</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">10</span>     <span class="mf">9e0</span><span class="n">ccf88</span>  
<span class="n">EcalEndcapsRelationsSimDigi</span>                     <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">1</span>      <span class="n">b23406fa</span>  
<span class="n">EcalEndcapsRelationsSimRec</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">1</span>      <span class="mi">1</span><span class="n">a339e32</span>  
<span class="n">EventHeader</span>                                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">EventHeader</span>                                             <span class="mi">1</span>      <span class="n">d793ab91</span>  
<span class="n">ForwardTracks</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">0</span>      <span class="n">b7e64675</span>  
<span class="n">ForwardTracks_dQdx</span>                              <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">0</span>      <span class="n">d0daea17</span>  
<span class="n">FTD_PIXELCollection</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">0</span>      <span class="mi">36051</span><span class="n">c2f</span>  
<span class="n">FTD_STRIPCollection</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">0</span>      <span class="mi">91</span><span class="n">aaa2a9</span>  
<span class="n">FTDCollection</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">0</span>      <span class="mi">70</span><span class="n">ad1764</span>  
<span class="n">FTDPixelTrackerHitRelations</span>                     <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">0</span>      <span class="mi">90</span><span class="n">ec0e5d</span>  
<span class="n">FTDPixelTrackerHits</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHitPlane</span>                                         <span class="mi">0</span>      <span class="mi">841</span><span class="n">c4c69</span>  
<span class="n">FTDSpacePointRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">0</span>      <span class="mi">0</span><span class="n">ede6e72</span>  
<span class="n">FTDSpacePoints</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit3D</span>                                            <span class="mi">0</span>      <span class="n">f261d80b</span>  
<span class="n">FTDStripTrackerHitRelations</span>                     <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">0</span>      <span class="mf">873e37</span><span class="n">f6</span>  
<span class="n">FTDStripTrackerHits</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHitPlane</span>                                         <span class="mi">0</span>      <span class="mi">5</span><span class="n">dc33fa1</span>  
<span class="n">GammaGammaCandidateEtaPrimes</span>                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="n">e430425d</span>  
<span class="n">GammaGammaCandidateEtaPrimes_startVertices</span>      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">a9b6c1b4</span>  
<span class="n">GammaGammaCandidateEtas</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="mi">7</span><span class="n">d565d48</span>  
<span class="n">GammaGammaCandidateEtas_startVertices</span>           <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mi">11070356</span>  
<span class="n">GammaGammaCandidatePi0s</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">1</span>      <span class="n">ea935713</span>  
<span class="n">GammaGammaCandidatePi0s_startVertices</span>           <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mi">6</span><span class="n">bd61357</span>  
<span class="n">GammaGammaParticles</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">1</span>      <span class="n">d36b2924</span>  
<span class="n">HcalBarrelCollectionDigi</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">579</span>    <span class="mi">43</span><span class="n">b62520</span>  
<span class="n">HcalBarrelCollectionRec</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">579</span>    <span class="mi">5</span><span class="n">dc52a38</span>  
<span class="n">HcalBarrelRegCollection</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">5187</span>   <span class="n">fca14938</span>  
<span class="n">HcalBarrelRegCollectionContributions</span>            <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">13678</span>  <span class="mi">1</span><span class="n">fba4d71</span>  
<span class="n">HcalBarrelRelationsSimDigi</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">579</span>    <span class="mi">03</span><span class="n">c20d3e</span>  
<span class="n">HcalBarrelRelationsSimRec</span>                       <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">579</span>    <span class="n">a173edda</span>  
<span class="n">HCalBarrelRPCHitsContributions</span>                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">1269</span>   <span class="mi">73752026</span>  
<span class="n">HCalECRingRPCHitsContributions</span>                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="n">ff9a4c31</span>  
<span class="n">HcalEndcapRingCollection</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">1</span>      <span class="mi">2</span><span class="n">cf7e1be</span>  
<span class="n">HcalEndcapRingCollectionContributions</span>           <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">1</span>      <span class="mf">24751e9</span><span class="n">a</span>  
<span class="n">HcalEndcapRingCollectionDigi</span>                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="n">ce498a9f</span>  
<span class="n">HcalEndcapRingCollectionRec</span>                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="mi">298</span><span class="n">b321c</span>  
<span class="n">HcalEndcapRingRelationsSimDigi</span>                  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mi">337</span><span class="n">f38db</span>  
<span class="n">HcalEndcapRingRelationsSimRec</span>                   <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mi">9538</span><span class="n">a0c4</span>  
<span class="n">HCalEndcapRPCHitsContributions</span>                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="mi">0</span><span class="n">d7a1074</span>  
<span class="n">HcalEndcapsCollection</span>                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">31</span>     <span class="mi">4</span><span class="n">cc49016</span>  
<span class="n">HcalEndcapsCollectionContributions</span>              <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">60</span>     <span class="mi">5</span><span class="n">c69a46e</span>  
<span class="n">HcalEndcapsCollectionDigi</span>                       <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">1</span>      <span class="mf">87e4</span><span class="n">cc7a</span>  
<span class="n">HcalEndcapsCollectionRec</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">1</span>      <span class="mi">5692</span><span class="n">d758</span>  
<span class="n">HcalEndcapsRelationsSimDigi</span>                     <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">1</span>      <span class="n">d81dbf2d</span>  
<span class="n">HcalEndcapsRelationsSimRec</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">1</span>      <span class="mf">8e670</span><span class="n">bee</span>  
<span class="n">KinkRecoParticles</span>                               <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="n">d1fed390</span>  
<span class="n">KinkRecoParticles_startVertices</span>                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">bcd2f4a3</span>  
<span class="n">KinkVertices</span>                                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">0</span>      <span class="mi">67154</span><span class="n">bfd</span>  
<span class="n">KinkVertices_associatedParticles</span>                <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">c7c3d304</span>  
<span class="n">LCAL</span>                                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="mi">204</span><span class="n">bcc12</span>  
<span class="n">LHCAL</span>                                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">0</span>      <span class="mi">82</span><span class="n">c94b29</span>  
<span class="n">LHCalCollection</span>                                 <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">0</span>      <span class="n">fe7e35be</span>  
<span class="n">LHCalCollectionContributions</span>                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="n">f612984f</span>  
<span class="n">LumiCalCollection</span>                               <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">0</span>      <span class="mi">45759015</span>  
<span class="n">LumiCalCollectionContributions</span>                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="n">dab2a7ce</span>  
<span class="n">MarlinTrkTracks</span>                                 <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="mi">7266</span><span class="n">ea44</span>  
<span class="n">MarlinTrkTracks_dQdx</span>                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="mf">1e3</span><span class="n">e8bd1</span>  
<span class="n">MarlinTrkTracksKaon</span>                             <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="mi">9</span><span class="n">b4b210d</span>  
<span class="n">MarlinTrkTracksKaon_dQdx</span>                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="n">bf4fdd69</span>  
<span class="n">MarlinTrkTracksKaonMCP</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                  <span class="mi">0</span>      <span class="n">d105452e</span>  
<span class="n">MarlinTrkTracksMCTruthLink</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                  <span class="mi">4</span>      <span class="mf">7e7</span><span class="n">a344f</span>  
<span class="n">MarlinTrkTracksProton</span>                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="mi">4</span><span class="n">c3b9a42</span>  
<span class="n">MarlinTrkTracksProton_dQdx</span>                      <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="n">c9d533d0</span>  
<span class="n">MarlinTrkTracksProtonMCP</span>                        <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                  <span class="mi">0</span>      <span class="mf">04e8</span><span class="n">d978</span>  
<span class="n">MCParticles</span>                                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span>                                              <span class="mi">28</span>     <span class="n">a1cba250</span>  
<span class="n">MCParticlesSkimmed</span>                              <span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span>                                              <span class="mi">21</span>     <span class="mi">16</span><span class="n">b252ac</span>  
<span class="n">MCTruthClusterLink</span>                              <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Cluster</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                <span class="mi">17</span>     <span class="mi">10793</span><span class="n">d25</span>  
<span class="n">MCTruthMarlinTrkTracksLink</span>                      <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>                  <span class="mi">4</span>      <span class="mi">27787578</span>  
<span class="n">MCTruthRecoLink</span>                                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>  <span class="mi">17</span>     <span class="n">dc1423e8</span>  
<span class="n">MUON</span>                                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span>                                          <span class="mi">1</span>      <span class="mi">0</span><span class="n">f355ef3</span>  
<span class="n">PandoraClusters</span>                                 <span class="n">edm4hep</span><span class="p">::</span><span class="n">Cluster</span>                                                 <span class="mi">7</span>      <span class="mi">1</span><span class="n">ada7608</span>  
<span class="n">PandoraPFANewStartVertices</span>                      <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">7</span>      <span class="mi">95</span><span class="n">bc4ba3</span>  
<span class="n">PandoraPFANewStartVertices_associatedParticles</span>  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">7</span>      <span class="mi">151342</span><span class="n">a3</span>  
<span class="n">PandoraPFOs</span>                                     <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">7</span>      <span class="n">fa28d9be</span>  
<span class="n">PandoraPFOs_PID_BasicVariablePID</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">4</span>      <span class="mi">9</span><span class="n">cc40aa6</span>  
<span class="n">PandoraPFOs_PID_dEdxPID</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">4</span>      <span class="n">e82a9284</span>  
<span class="n">PandoraPFOs_PID_LikelihoodPID</span>                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">4</span>      <span class="n">e0553960</span>  
<span class="n">PandoraPFOs_PID_LowMomMuID</span>                      <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">4</span>      <span class="n">c024d50d</span>  
<span class="n">PandoraPFOs_PID_ShowerShapesPID</span>                 <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">4</span>      <span class="mi">9</span><span class="n">dd76e70</span>  
<span class="n">PandoraPFOs_PID_TOFEstimators0ps</span>                <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">7</span>      <span class="n">dd901b8c</span>  
<span class="n">PandoraPFOs_PID_TOFEstimators100ps</span>              <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">7</span>      <span class="mi">71</span><span class="n">fe9f72</span>  
<span class="n">PandoraPFOs_PID_TOFEstimators10ps</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">7</span>      <span class="n">b3db3b27</span>  
<span class="n">PandoraPFOs_PID_TOFEstimators50ps</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">7</span>      <span class="mi">97</span><span class="n">c82aec</span>  
<span class="n">PandoraPFOs_PID_TrackLengthProcessor</span>            <span class="n">edm4hep</span><span class="p">::</span><span class="n">ParticleID</span>                                              <span class="mi">7</span>      <span class="n">f01378f7</span>  
<span class="n">PandoraPFOs_startVertices</span>                       <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">3</span>      <span class="mi">87688</span><span class="n">bf5</span>  
<span class="n">PrimaryVertex</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">1</span>      <span class="n">d2a1d555</span>  
<span class="n">PrimaryVertex_associatedParticles</span>               <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">1</span>      <span class="mi">427</span><span class="n">d1738</span>  
<span class="n">PrimaryVertex_RP</span>                                <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">1</span>      <span class="n">c8b21469</span>  
<span class="n">PrimaryVertex_RP_startVertices</span>                  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mf">68e585</span><span class="n">a8</span>  
<span class="n">ProngRecoParticles</span>                              <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="n">f338aaff</span>  
<span class="n">ProngRecoParticles_startVertices</span>                <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">f3ca8a7c</span>  
<span class="n">ProngVertices</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">0</span>      <span class="n">b8af33f8</span>  
<span class="n">ProngVertices_associatedParticles</span>               <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mi">2</span><span class="n">fa78077</span>  
<span class="n">RecoMCTruthLink</span>                                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">MCParticle</span><span class="o">&gt;</span>  <span class="mi">17</span>     <span class="mi">6</span><span class="n">b81837a</span>  
<span class="n">RelationBCalHit</span>                                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mi">16</span><span class="n">db0c64</span>  
<span class="n">RelationLcalHit</span>                                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mi">385</span><span class="n">d5b37</span>  
<span class="n">RelationLHcalHit</span>                                <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">0</span>      <span class="mf">80e932</span><span class="n">e3</span>  
<span class="n">RelationMuonHit</span>                                 <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">CalorimeterHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span><span class="o">&gt;</span>  <span class="mi">1</span>      <span class="n">df24625a</span>  
<span class="n">SETCollection</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">15</span>     <span class="mi">0426</span><span class="n">d8e5</span>  
<span class="n">SETSpacePointRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">8</span>      <span class="n">ccfb6226</span>  
<span class="n">SETSpacePoints</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit3D</span>                                            <span class="mi">4</span>      <span class="mi">9</span><span class="n">ae08aff</span>  
<span class="n">SETTrackerHitRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">15</span>     <span class="mi">6</span><span class="n">ebe4659</span>  
<span class="n">SETTrackerHits</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHitPlane</span>                                         <span class="mi">15</span>     <span class="mi">1</span><span class="n">bcf6c70</span>  
<span class="n">SITCollection</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">17</span>     <span class="mi">3</span><span class="n">d720f34</span>  
<span class="n">SiTracks</span>                                        <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="mi">82</span><span class="n">d755bd</span>  
<span class="n">SiTracks_dQdx</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="mi">14</span><span class="n">cea21e</span>  
<span class="n">SITTrackerHitRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">17</span>     <span class="n">dc11ff9d</span>  
<span class="n">SITTrackerHits</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHitPlane</span>                                         <span class="mi">17</span>     <span class="mi">2127</span><span class="n">d3c9</span>  
<span class="n">SplitRecoParticles</span>                              <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="mi">1</span><span class="n">b27bab1</span>  
<span class="n">SplitRecoParticles_startVertices</span>                <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">d24e6609</span>  
<span class="n">SplitVertices</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">0</span>      <span class="mi">4</span><span class="n">c3daf03</span>  
<span class="n">SplitVertices_associatedParticles</span>               <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mi">97</span><span class="n">a389f2</span>  
<span class="n">SubsetTracks</span>                                    <span class="n">edm4hep</span><span class="p">::</span><span class="n">Track</span>                                                   <span class="mi">4</span>      <span class="n">dac1deb9</span>  
<span class="n">SubsetTracks_dQdx</span>                               <span class="n">edm4hep</span><span class="p">::</span><span class="n">RecDqdx</span>                                                 <span class="mi">4</span>      <span class="n">d4c47519</span>  
<span class="n">TPCCollection</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">880</span>    <span class="mi">1649</span><span class="n">dae6</span>  
<span class="n">TPCLowPtCollection</span>                              <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">0</span>      <span class="n">ea1366dc</span>  
<span class="n">TPCSpacePointCollection</span>                         <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">0</span>      <span class="mi">18</span><span class="n">f61713</span>  
<span class="n">TPCTrackerHitRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">876</span>    <span class="n">efb4f127</span>  
<span class="n">TPCTrackerHits</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit3D</span>                                            <span class="mi">876</span>    <span class="mi">9134</span><span class="n">c63f</span>  
<span class="n">V0RecoParticles</span>                                 <span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span>                                   <span class="mi">0</span>      <span class="mi">827</span><span class="n">bbcbb</span>  
<span class="n">V0RecoParticles_startVertices</span>                   <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="n">c7c093b6</span>  
<span class="n">V0Vertices</span>                                      <span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span>                                                  <span class="mi">0</span>      <span class="n">e7a4abb7</span>  
<span class="n">V0Vertices_associatedParticles</span>                  <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">Vertex</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">ReconstructedParticle</span><span class="o">&gt;</span>      <span class="mi">0</span>      <span class="mi">57</span><span class="n">cb230e</span>  
<span class="n">VXDCollection</span>                                   <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span>                                           <span class="mi">24</span>     <span class="mf">67202e26</span>  
<span class="n">VXDTrackerHitRelations</span>                          <span class="n">podio</span><span class="p">::</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHit</span><span class="p">,</span><span class="n">edm4hep</span><span class="p">::</span><span class="n">SimTrackerHit</span><span class="o">&gt;</span>          <span class="mi">24</span>     <span class="mi">178</span><span class="n">c9330</span>  
<span class="n">VXDTrackerHits</span>                                  <span class="n">edm4hep</span><span class="p">::</span><span class="n">TrackerHitPlane</span>                                         <span class="mi">24</span>     <span class="n">db43b881</span>  
<span class="n">YokeBarrelCollection</span>                            <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">89</span>     <span class="mi">97</span><span class="n">bfada6</span>  
<span class="n">YokeBarrelCollectionContributions</span>               <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">205</span>    <span class="mf">5e0</span><span class="n">fdff3</span>  
<span class="n">YokeEndcapsCollection</span>                           <span class="n">edm4hep</span><span class="p">::</span><span class="n">SimCalorimeterHit</span>                                       <span class="mi">0</span>      <span class="mi">84</span><span class="n">b71e41</span>  
<span class="n">YokeEndcapsCollectionContributions</span>              <span class="n">edm4hep</span><span class="p">::</span><span class="n">CaloHitContribution</span>                                     <span class="mi">0</span>      <span class="mi">96</span><span class="n">acca75</span>  

<span class="n">Parameters</span><span class="p">:</span>
<span class="n">Name</span>               <span class="n">Type</span>         <span class="n">Elements</span>  
<span class="o">-----------------</span>  <span class="o">-----------</span>  <span class="o">--------</span>  
<span class="n">beamPDG1</span>           <span class="nb">int</span>          <span class="mi">1</span>         
<span class="n">beamPDG2</span>           <span class="nb">int</span>          <span class="mi">1</span>         
<span class="n">Event</span> <span class="n">Number</span>       <span class="nb">int</span>          <span class="mi">1</span>         
<span class="n">ProcessID</span>          <span class="nb">int</span>          <span class="mi">1</span>         
<span class="n">Run</span> <span class="n">ID</span>             <span class="nb">int</span>          <span class="mi">1</span>         
<span class="n">_weight</span>            <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">alphaQCD</span>           <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">beamPol1</span>           <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">beamPol2</span>           <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">crossSection</span>       <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">crossSectionError</span>  <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">Energy</span>             <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">scale</span>              <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">sqme</span>               <span class="nb">float</span>        <span class="mi">1</span>         
<span class="n">BeamSpectrum</span>       <span class="n">std</span><span class="p">::</span><span class="n">string</span>  <span class="mi">1</span>         
<span class="n">processName</span>        <span class="n">std</span><span class="p">::</span><span class="n">string</span>  <span class="mi">1</span>         
</pre></div>
</div>
</div>
</details></section>
</section>
<section id="writing-a-gaudi-algorithm">
<h2>Writing a Gaudi algorithm<a class="headerlink" href="#writing-a-gaudi-algorithm" title="Link to this heading"></a></h2>
<p>This is the part of the tutorial where you will have to actively start thinking
and working yourself, after everything so far was possible by just copying
commands and running them.</p>
<p>You will write a replacement for the
<a class="reference external" href="https://github.com/iLCSoft/MarlinReco/tree/master/Analysis/GammaGammaCandidateFinder"><code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code></a>
processor with the final aim of completely replacing the <code class="docutils literal notranslate"><span class="pre">MyPi0Finder</span></code> (and
potentially also the <code class="docutils literal notranslate"><span class="pre">MyEtaFinder</span></code> and <code class="docutils literal notranslate"><span class="pre">MyEtaPrimeFinder</span></code>) Processor(s) in the
ILDReconstruction chain. To do this we will break the full
<code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> processor into smaller algorithms to cover the three
main things it does</p>
<ol class="arabic simple">
<li><p>Filter the input particles to only contain photons with a minimal energy
(<a class="reference external" href="https://github.com/iLCSoft/MarlinReco/blob/7aa853773d2a6a718aee63f39c436d5af622353a/Analysis/GammaGammaCandidateFinder/src/GammaGammaCandidateFinder.cc#L169-L189">see
here</a>)</p></li>
<li><p>Build all possible photon candidates and run a kinematic fit on the
combination if they are close enough to a configured resonance mass and keep
only those that have a good enough fit quality (<a class="reference external" href="https://github.com/iLCSoft/MarlinReco/blob/7aa853773d2a6a718aee63f39c436d5af622353a/Analysis/GammaGammaCandidateFinder/src/GammaGammaCandidateFinder.cc#L198-L374">see
here</a>)</p></li>
</ol>
<p>For the first step we will write a generic <code class="docutils literal notranslate"><span class="pre">RecoParticleFilter</span></code> algorithm that
allows us to</p>
<ul class="simple">
<li><p>Filter reconstructed particles according to their assigned <code class="docutils literal notranslate"><span class="pre">PDG</span></code> value as well
as</p></li>
<li><p>requiring a minimal energy.</p></li>
</ul>
<p>For the second algorithm we will then use the outputs of the first
(appropriately configured) algorithm and setup the kinematic fit for all the
possible combinations.</p>
<section id="setting-up-tutorial">
<h3>Setting up tutorial<a class="headerlink" href="#setting-up-tutorial" title="Link to this heading"></a></h3>
<p>Since writing everything from scratch will take too long (and is almost never
really necessary in any case<a class="footnote-reference brackets" href="#id6" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>), we have prepared some skeleton code and setup for
this part. In order to get it clone the
<a class="reference external" href="https://github.com/key4hep/key4hep-tutorials"><code class="docutils literal notranslate"><span class="pre">key4hep-tutorials</span></code></a> repository
and go to the <code class="docutils literal notranslate"><span class="pre">gaudi_alg_kinfit</span></code> tutorial</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$TUTORIAL_BASE_DIR</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/key4hep/key4hep-tutorials
<span class="nb">cd</span><span class="w"> </span>key4hep-tutorials/gaudi_alg_kinfit
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you ever get stuck at some point you can always peak into the <code class="docutils literal notranslate"><span class="pre">.solution</span></code>
folder where we have provided a complete implementation that you can in
principle also simply copy over (if you are really lazy)</p>
</div>
<p>The tutorial follows the usual structure of a Key4hep (Gaudi) project. Most
importantly there is a <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file that contains the build
configuration. <strong>For the purpose of this tutorial this is already fully
configured to find all dependencies and to setup everything. You will not need
to edit this file, but it’s still recommended to at least have a quick look to
see if everything makes sense.</strong> The skeleton implementations of the two
algorithms described above live in <code class="docutils literal notranslate"><span class="pre">GaudiKinfit/components</span></code> and their build is
configured in <code class="docutils literal notranslate"><span class="pre">GaudiKinfit/CMakeLists.txt</span></code>. <strong>You will have to minimally edit this
file in the course of the tutorial.</strong></p>
</section>
<section id="writing-the-filter-algorithm">
<h3>Writing the Filter algorithm<a class="headerlink" href="#writing-the-filter-algorithm" title="Link to this heading"></a></h3>
<p>We have prepared a skeleton implementation of the <code class="docutils literal notranslate"><span class="pre">RecoParticleFilter</span></code> in
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/components/RecoParticleFilter.hpp</span></code> and
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/components/RecoParticleFilter.cpp</span></code> that you will now have to fill
with life and the desired functionality</p>
<section id="tasks">
<h4>Tasks<a class="headerlink" href="#tasks" title="Link to this heading"></a></h4>
<p>The main tasks (also outlined
in the files) are to:</p>
<ul class="simple">
<li><p>Figure out which of the Functional algorithms to use as a base class for this
algorithm</p></li>
<li><p>Add some properties to make it configurable</p></li>
<li><p>Implement the actual functionality</p></li>
<li><p>Install the algorithm and configure the environment for Gaudi to find it</p></li>
<li><p>Debug the algorithm and validate it’s working correctly. We recommend to look
at <a class="reference internal" href="#testing-filter-algo"><span class="std std-ref">the section below</span></a> on how to go about
that <strong>once you have an algorithm that compiles and you think should work</strong></p></li>
</ul>
<p>As a first step we need to configure the project via the usual commands</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>-B<span class="w"> </span>build<span class="w"> </span>-S<span class="w"> </span>.<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/install
</pre></div>
</div>
<p>This will fail with an error similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Configuring</span> <span class="n">done</span> <span class="p">(</span><span class="mf">4.1</span><span class="n">s</span><span class="p">)</span>
<span class="n">CMake</span> <span class="n">Error</span> <span class="n">at</span> <span class="o">&lt;</span><span class="n">long</span><span class="o">-</span><span class="n">gaudi</span><span class="o">-</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="n">lib</span><span class="o">/</span><span class="n">cmake</span><span class="o">/</span><span class="n">Gaudi</span><span class="o">/</span><span class="n">GaudiToolbox</span><span class="o">.</span><span class="n">cmake</span><span class="p">:</span><span class="mi">450</span> <span class="p">(</span><span class="n">add_library</span><span class="p">):</span>
  <span class="n">No</span> <span class="n">SOURCES</span> <span class="n">given</span> <span class="n">to</span> <span class="n">target</span><span class="p">:</span> <span class="n">GaudiKinfitPlugins</span>
<span class="n">Call</span> <span class="n">Stack</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">first</span><span class="p">):</span>
  <span class="n">GaudiKinfit</span><span class="o">/</span><span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span><span class="p">:</span><span class="mi">6</span> <span class="p">(</span><span class="n">gaudi_add_module</span><span class="p">)</span>


<span class="n">CMake</span> <span class="n">Generate</span> <span class="n">step</span> <span class="n">failed</span><span class="o">.</span>  <span class="n">Build</span> <span class="n">files</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">regenerated</span> <span class="n">correctly</span><span class="o">.</span>
</pre></div>
</div>
<p>That is because we first have to include the necessary source files into the
target. <strong>Open the <code class="docutils literal notranslate"><span class="pre">GaudiKinfit/CMakeLists.txt</span></code> and uncomment the 3rd line</strong>
(like this)</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">sources</span>
<span class="w">  </span><span class="c"># components/GammaGammaCandidateFinder.cpp</span>
<span class="w">  </span><span class="s">components/RecoParticleFilter.cpp</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Run the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command from above again and it should succeed now and you are
able to try and build for the first time via.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>--build<span class="w"> </span>build
</pre></div>
</div>
<p>You will now run into a build failure.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Original build failure<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[ 20%] Building CXX object GaudiKinfit/CMakeFiles/GaudiKinfitPlugins.dir/components/RecoParticleFilter.cpp.o</span>
<span class="go">In file included from &lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:1:</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:13:47: error: &#39;ISvcLocator&#39; has not been declared</span>
<span class="go">   13 |   RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc);</span>
<span class="go">      |                                               ^~~~~~~~~~~</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:17:3: error: &#39;edm4hep::ReconstructedParticleCollection RecoParticleFilter::operator()(const edm4hep::ReconstructedParticleCollection&amp;) const&#39; marked &#39;final&#39;, but is not virtual</span>
<span class="go">   17 |   operator()(const edm4hep::ReconstructedParticleCollection&amp; recoColl) const final;</span>
<span class="go">      |   ^~~~~~~~</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:6:65: error: &#39;ISvcLocator&#39; has not been declared</span>
<span class="go">    6 | RecoParticleFilter::RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc)</span>
<span class="go">      |                                                                 ^~~~~~~~~~~</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp: In constructor &#39;RecoParticleFilter::RecoParticleFilter(const std::string&amp;, int*)&#39;:</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:6:59: warning: unused parameter &#39;name&#39; [-Wunused-parameter]</span>
<span class="go">    6 | RecoParticleFilter::RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc)</span>
<span class="go">      |                                        ~~~~~~~~~~~~~~~~~~~^~~~</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:6:78: warning: unused parameter &#39;svcLoc&#39; [-Wunused-parameter]</span>
<span class="go">    6 | RecoParticleFilter::RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc)</span>
<span class="go">      |                                                                 ~~~~~~~~~~~~~^~~~~~</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp: In member function &#39;edm4hep::ReconstructedParticleCollection RecoParticleFilter::operator()(const edm4hep::ReconstructedParticleCollection&amp;) const&#39;:</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:19:1: warning: no return statement in function returning non-void [-Wreturn-type]</span>
<span class="go">   19 | }</span>
<span class="go">      | ^</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp: At global scope:</span>
<span class="go">&lt;path-to&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:21:38: error: expected constructor, destructor, or type conversion at end of input</span>
<span class="go">   21 | DECLARE_COMPONENT(RecoParticleFilter)</span>
<span class="go">      |                                      ^</span>
<span class="go">gmake[2]: *** [GaudiKinfit/CMakeFiles/GaudiKinfitPlugins.dir/build.make:79: GaudiKinfit/CMakeFiles/GaudiKinfitPlugins.dir/components/RecoParticleFilter.cpp.o] Error 1</span>
<span class="go">gmake[1]: *** [CMakeFiles/Makefile2:148: GaudiKinfit/CMakeFiles/GaudiKinfitPlugins.dir/all] Error 2</span>
<span class="go">gmake: *** [Makefile:136: all] Error 2</span>
</pre></div>
</div>
</div>
</details><p>In order to fix this you first have to implement at least the basics of the
algorithm:</p>
<ul class="simple">
<li><p>Choose the correct Functional base class and inherit from it (don’t forget to
include the correct header for this).</p></li>
<li><p>Use the correct constructor</p></li>
</ul>
<p>Once you have correctly implemented this you should be able to build (althout
likely not without warnings yet).</p>
</section>
<section id="installing-and-setting-up-the-runtime-environment">
<span id="setting-up-environment"></span><h4>Installing and setting up the runtime environment<a class="headerlink" href="#installing-and-setting-up-the-runtime-environment" title="Link to this heading"></a></h4>
<p>Once you are at a state where you want to test or use your algorithm you have to
install it and setup the runtime environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing your algorithm is necessary whenever you have changed it and want to
test the new changes. <strong>Setting up the environment is only necessary once.</strong></p>
</div>
<p>For installing simply run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>--build<span class="w"> </span>build<span class="w"> </span>--target<span class="w"> </span>install
</pre></div>
</div>
<p>For setting up the environment we recommend to use the <code class="docutils literal notranslate"><span class="pre">k4_local_repo</span></code> command,
but you can also do it manually. We will show you how to verify this worked in
the <a class="reference internal" href="#testing-filter-algo"><span class="std std-ref">testing section</span></a>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
k4_local_repo</label><div class="sd-tab-content docutils">
<p>Make sure to call this in the base directory of your package (most importantly
the <code class="docutils literal notranslate"><span class="pre">install</span></code> folder should be in the directory you call this from).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>k4_local_repo
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
Manually</label><div class="sd-tab-content docutils">
<p>This (and a bit more) is also what <code class="docutils literal notranslate"><span class="pre">k4_local_repo</span></code> is doing for you. In general
the minimal setup you have to do is to change the following variables for Gaudi
to be able to pick your plugins up</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/install/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/install/python:<span class="nv">$PYTHONPATH</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="hints-and-some-common-pitfalls">
<span id="hints-pitfalls-filter-build"></span><h4>Hints and some common pitfalls<a class="headerlink" href="#hints-and-some-common-pitfalls" title="Link to this heading"></a></h4>
<p>In case you get stuck and don’t want to immediately peak into the <code class="docutils literal notranslate"><span class="pre">.solution</span></code>
folder, we have also tried to collect some of the common errors and issues one
encounters when first embarking onto the <em>Functional journey</em>. We have grouped
them into several separate dropdowns to avoid a) spoilers and b) excessive
scrolling.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I don’t know how to choose the Functional base class<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The choice of the Functional base class is entirely defined by the number of
inputs and outputs of an algorithm. In this case these are already defined in
the signature of the <code class="docutils literal notranslate"><span class="pre">operator()</span></code>.</p>
<ul class="simple">
<li><p class="sd-card-text">How many (and which) inputs does this algorithm have?</p></li>
<li><p class="sd-card-text">How many (and which) outputs does this algorithm have?</p></li>
<li><p class="sd-card-text">Which Functional base class fits this?</p></li>
</ul>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I still don’t know which Functional base class to use<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">We have a single input (in the form of a <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">edm4hep::ReconstructedParticleCollection&amp;</span></code>) and a single output (another
<code class="docutils literal notranslate"><span class="pre">edm4hep::ReconstructedParticleCollection</span></code>). The deciding factor in this case is
the <strong>singular output</strong> which (in combination with at least one input) is the
definining characteristic of the <code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code>.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I can’t figure out the correct syntax for defining the base class<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Look at the signature of <code class="docutils literal notranslate"><span class="pre">operator()</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span>
<span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">RecontructedParticleCollection</span><span class="o">&amp;</span><span class="w"> </span><span class="n">recoColl</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">final</span><span class="p">;</span>
</pre></div>
</div>
<p class="sd-card-text">To get to the right template argument for the <code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code> what you
have to do is effectively</p>
<ul class="simple">
<li><p class="sd-card-text">Remove the function name (i.e. <code class="docutils literal notranslate"><span class="pre">operator()</span></code> in this case)</p></li>
<li><p class="sd-card-text">Remove the argument name(s) (i.e. <code class="docutils literal notranslate"><span class="pre">recoColl</span></code> in this case)</p></li>
<li><p class="sd-card-text">Remove all method qualifiers (i.e. <code class="docutils literal notranslate"><span class="pre">const</span></code> and <code class="docutils literal notranslate"><span class="pre">final</span></code> in this case. <code class="docutils literal notranslate"><span class="pre">final</span></code>
might also be <code class="docutils literal notranslate"><span class="pre">override</span></code> in some cases)</p></li>
</ul>
<p class="sd-card-text">You then arrive at</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Which, when placed into the template argument for <code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code> gives
as minimal class definition</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">RecoParticleFilter</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">k4FWCore</span><span class="o">::</span><span class="n">Transformer</span><span class="o">&lt;</span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="p">(</span>
<span class="w">                                      </span><span class="k">const</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">RecoParticleFilter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ISvcLocator</span><span class="o">*</span><span class="w"> </span><span class="n">svcLoc</span><span class="p">);</span>

<span class="w">  </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span>
<span class="w">  </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="o">&amp;</span><span class="w"> </span><span class="n">recoColl</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">final</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Common compilation errors<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">The exact paths to files will be different in your case, but you should be able
to pattern match quite a bit. Additionally, <strong>when reading compiler errors,
always start at the top and try to identify the first error in your code.</strong> It
is possible that the rest is simply cascading failures from there and solving
the first issue makes everything build. This is also why we only show the first
few lines of compiler output below.</p>
</div>
<ul>
<li><p class="sd-card-text"><strong>The signature of <code class="docutils literal notranslate"><span class="pre">operator()</span></code> does not agree with the <code class="docutils literal notranslate"><span class="pre">Transformer</span></code> template
argument</strong></p>
<p class="sd-card-text">This will happen if you specify the template arguments of the
<code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code> differently to the signature of <code class="docutils literal notranslate"><span class="pre">operator()</span></code>. Common
reasons are</p>
<ul class="simple">
<li><p class="sd-card-text">Missing <code class="docutils literal notranslate"><span class="pre">const</span></code> qualifiers on the input</p></li>
<li><p class="sd-card-text">Missing <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> (reference) qualifiers on the input</p></li>
<li><p class="sd-card-text">Typos</p></li>
</ul>
</li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">In file included from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:1:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:16:3: error: &#39;edm4hep::ReconstructedParticleCollection RecoParticleFilter::operator()(const edm4hep::ReconstructedParticleCollection&amp;) const&#39; marked &#39;final&#39;, but is not virtual</span>
<span class="go">   16 |   operator()(const edm4hep::ReconstructedParticleCollection&amp; recoColl) const final;</span>
<span class="go">      |   ^~~~~~~~</span>
<span class="go">[...]</span>
</pre></div>
</div>
<ul class="simple">
<li><p class="sd-card-text"><strong>The inputs and outputs are not Collections</strong></p></li>
</ul>
<p class="sd-card-text">All functional algorithms take only EDM4hep collections or vectors of EDM4hep
collections as inputs and can only produce EDM4hep collections (or multiple
EDM4hep collections in the form of a <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>) as outputs. Trying to
instantiate them with a signature different then this will yield the following,
fairly descriptive error message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">In file included from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:5,</span>
<span class="go">                 from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:1:</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h: In instantiation of &#39;struct k4FWCore::details::Transformer&lt;edm4hep::ReconstructedParticle(const edm4hep::ReconstructedParticleCollection&amp;), Gaudi::Functional::Traits::use_&lt;&gt; &gt;&#39;:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:12:24:   required from here</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:49:89: error: static assertion failed: Transformer and Producer output types must be EDM4hep collections or vectors of collections</span>
<span class="go">   49 |     static_assert((std::is_base_of_v&lt;podio::CollectionBase, Out&gt; || isVectorLike_v&lt;Out&gt; ||</span>
<span class="go">      |                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~</span>
<span class="go">   50 |                    std::is_same_v&lt;podio::CollectionBase*, Out&gt;),</span>
<span class="go">      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                          </span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:49:89: note: &#39;((((bool)std::is_base_of_v&lt;podio::CollectionBase, edm4hep::ReconstructedParticle&gt;) || ((bool)k4FWCore::details::isVectorLike_v&lt;edm4hep::ReconstructedParticle&gt;)) || ((bool)std::is_same_v&lt;podio::CollectionBase*, edm4hep::ReconstructedParticle&gt;))&#39; evaluates to false</span>

<span class="go">[...]</span>
</pre></div>
</div>
<ul class="simple">
<li><p class="sd-card-text"><strong>The <code class="docutils literal notranslate"><span class="pre">Transformer</span></code> constructor is not called from the algorithm constructor
(initializer list)</strong></p></li>
</ul>
<p class="sd-card-text">Make sure to call the constructor of the Functional in the initializer list of
your algorithms constructor, e.g.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RecoParticleFilter</span><span class="o">::</span><span class="n">RecoParticleFilter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ISvcLocator</span><span class="o">*</span><span class="w"> </span><span class="n">svcLoc</span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">Transformer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">svcLoc</span><span class="p">,</span><span class="w"> </span><span class="cm">/* inputs and outputs property names and default vlaues */</span><span class="p">)</span><span class="w"> </span>
<span class="w">  </span><span class="p">{}</span>
</pre></div>
</div>
<p class="sd-card-text">The compiler will otherwise complain something along the lines of:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp: In constructor &#39;RecoParticleFilter::RecoParticleFilter(const std::string&amp;, ISvcLocator*)&#39;:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:6:84: error: no matching function for call to &#39;k4FWCore::details::Transformer&lt;edm4hep::ReconstructedParticleCollection(const edm4hep::ReconstructedParticleCollection&amp;), Gaudi::Functional::Traits::use_&lt;&gt; &gt;::Transformer()&#39;</span>
<span class="go">    6 | RecoParticleFilter::RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc)</span>
<span class="go">      |                                                                                    ^</span>
<span class="go">In file included from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:5,</span>
<span class="go">                 from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:1:</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:68:5: note: candidate: &#39;template&lt;class IArgs, class OArgs, long unsigned int ...I, long unsigned int ...J&gt; k4FWCore::details::Transformer&lt;Out(const In&amp; ...), Traits_&gt;::Transformer(std::string, ISvcLocator*, const IArgs&amp;, std::index_sequence&lt;I ...&gt;, const OArgs&amp;, std::index_sequence&lt;J ...&gt;) [with OArgs = IArgs; long unsigned int ...I = OArgs; long unsigned int ...J = {I ...}; Out = edm4hep::ReconstructedParticleCollection; In = {edm4hep::ReconstructedParticleCollection}; Traits_ = Gaudi::Functional::Traits::use_&lt;&gt;]&#39;</span>
<span class="go">   68 |     Transformer(std::string name, ISvcLocator* locator, const IArgs&amp; inputs, std::index_sequence&lt;I...&gt;,</span>
<span class="go">      |     ^~~~~~~~~~~</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:68:5: note:   template argument deduction/substitution failed:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:6:84: note:   candidate expects 6 arguments, 0 provided</span>
<span class="go">    6 | RecoParticleFilter::RecoParticleFilter(const std::string&amp; name, ISvcLocator* svcLoc)</span>

<span class="go">[...]</span>
</pre></div>
</div>
<ul class="simple">
<li><p class="sd-card-text"><strong>Trying to use <code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code> in the algorithm constructor</strong></p></li>
</ul>
<p class="sd-card-text">Do not use the fully qualified <code class="docutils literal notranslate"><span class="pre">k4FWCore::Transformer</span></code> in the initializers list.
Instead only use the unqualified <code class="docutils literal notranslate"><span class="pre">Transformer</span></code> to forward constructor arguments.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp: In constructor &#39;RecoParticleFilter::RecoParticleFilter(const std::string&amp;, ISvcLocator*)&#39;:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:7:28: error: expected class-name before &#39;(&#39; token</span>
<span class="go">    7 |     : k4FWCore::Transformer(name, svcLoc) {}</span>
<span class="go">      |                            ^</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:7:28: error: no matching function for call to &#39;k4FWCore::details::Transformer&lt;edm4hep::ReconstructedParticleCollection(const edm4hep::ReconstructedParticleCollection&amp;), Gaudi::Functional::Traits::use_&lt;&gt; &gt;::Transformer()&#39;</span>
<span class="go">In file included from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.hpp:5,</span>
<span class="go">                 from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:1:</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:68:5: note: candidate: &#39;template&lt;class IArgs, class OArgs, long unsigned int ...I, long unsigned int ...J&gt; k4FWCore::details::Transformer&lt;Out(const In&amp; ...), Traits_&gt;::Transformer(std::string, ISvcLocator*, const IArgs&amp;, std::index_sequence&lt;I ...&gt;, const OArgs&amp;, std::index_sequence&lt;J ...&gt;) [with OArgs = IArgs; long unsigned int ...I = OArgs; long unsigned int ...J = {I ...}; Out = edm4hep::ReconstructedParticleCollection; In = {edm4hep::ReconstructedParticleCollection}; Traits_ = Gaudi::Functional::Traits::use_&lt;&gt;]&#39;</span>
<span class="go">   68 |     Transformer(std::string name, ISvcLocator* locator, const IArgs&amp; inputs, std::index_sequence&lt;I...&gt;,</span>
<span class="go">      |     ^~~~~~~~~~~</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/include/k4FWCore/Transformer.h:68:5: note:   template argument deduction/substitution failed:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/RecoParticleFilter.cpp:7:28: note:   candidate expects 6 arguments, 0 provided</span>
<span class="go">    7 |     : k4FWCore::Transformer(name, svcLoc) {}</span>
<span class="go">      |                            ^</span>
<span class="go">      </span>
<span class="go">[...]</span>
</pre></div>
</div>
<ul class="simple">
<li><p class="sd-card-text"><strong>Messing up the braces and parenthesis in the <code class="docutils literal notranslate"><span class="pre">Transformer</span></code> constructor</strong></p></li>
</ul>
<p class="sd-card-text">This is probably the most common one, as it is really easy to do and things can
become confusing quickly. Almost always this will result in an error along the
lines of <em>error: no matching function to call for
k4FWCore::details::Transformer&lt;[…]&gt;</em>, e.g. something like shown below. The
best way to try and fix this is to go argument by argument and to remember, that
the inputs go into separate <code class="docutils literal notranslate"><span class="pre">{}</span></code> as the outputs. It usually helps to simply
format things clearly (even if <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> or your editor will potentially
destroy this again when you save)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RecoParticleFilter</span><span class="o">::</span><span class="n">RecoParticleFilter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ISvcLocator</span><span class="o">*</span><span class="w"> </span><span class="n">svcLoc</span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">Transformer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">svcLoc</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span><span class="n">KeyValues</span><span class="p">(</span><span class="s">&quot;Input&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;DefaultInputName&quot;</span><span class="p">})},</span><span class="w">           </span><span class="c1">// &lt;-- The input config</span>
<span class="w">    </span><span class="p">{</span><span class="n">KeyValues</span><span class="p">(</span><span class="s">&quot;OutputName&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;OutpuCollectionDefault&quot;</span><span class="p">})}</span><span class="w"> </span><span class="c1">// &lt;-- The output config</span>
<span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* Potentially more constructor things*/</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">tutorial</span><span class="o">-</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="n">key4hep</span><span class="o">-</span><span class="n">tutorials</span><span class="o">/</span><span class="n">gaudi_alg_kinfit</span><span class="o">/</span><span class="n">GaudiKinfit</span><span class="o">/</span><span class="n">components</span><span class="o">/</span><span class="n">RecoParticleFilter</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span> <span class="n">In</span> <span class="n">constructor</span> <span class="s1">&#39;RecoParticleFilter::RecoParticleFilter(const std::string&amp;, ISvcLocator*)&#39;</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">tutorial</span><span class="o">-</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="n">key4hep</span><span class="o">-</span><span class="n">tutorials</span><span class="o">/</span><span class="n">gaudi_alg_kinfit</span><span class="o">/</span><span class="n">GaudiKinfit</span><span class="o">/</span><span class="n">components</span><span class="o">/</span><span class="n">RecoParticleFilter</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">9</span><span class="p">:</span><span class="mi">112</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span> <span class="n">no</span> <span class="n">matching</span> <span class="n">function</span> <span class="k">for</span> <span class="n">call</span> <span class="n">to</span> <span class="s1">&#39;k4FWCore::details::Transformer&lt;edm4hep::ReconstructedParticleCollection(const edm4hep::ReconstructedParticleCollection&amp;), Gaudi::Functional::Traits::use_&lt;&gt; &gt;::Transformer(const std::string&amp;, ISvcLocator*&amp;, &lt;brace-enclosed initializer list&gt;)&#39;</span>
    <span class="mi">9</span> <span class="o">|</span>           <span class="p">{</span><span class="n">KeyValues</span><span class="p">(</span><span class="s2">&quot;InputCollection&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;PandoraPFOs&quot;</span><span class="p">}),</span> <span class="n">KeyValues</span><span class="p">(</span><span class="s2">&quot;OutputCollection&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;FilteredParticles&quot;</span><span class="p">})})</span> <span class="p">{}</span>
      <span class="o">|</span>                                                                                                                <span class="o">^</span>

</pre></div>
</div>
</div>
</details></section>
</section>
<section id="using-testing-the-filter-algorithm">
<span id="testing-filter-algo"></span><h3>Using / testing the Filter algorithm<a class="headerlink" href="#using-testing-the-filter-algorithm" title="Link to this heading"></a></h3>
<p>Implementing the functionality in c++ is only half of the story. Obviously, you
also want to exercise what you have implemented. For Gaudi based workflows this
means that we also have to write some python configuration that we can then pass
through <code class="docutils literal notranslate"><span class="pre">k4run</span></code>. For this we have also prepared a skeleton that setups most of
the basics that are always necessary. You can find the skeleton in
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/options/runRecoParticleFilter.py</span></code>.</p>
<p>For running this configuration use either the output of the ILD reconstruction
of the first part or the REC file that is available from the <code class="docutils literal notranslate"><span class="pre">RESOURCE_DIR</span></code></p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
ILD reconstruction</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>k4run<span class="w"> </span>GaudiKinfit/options/runRecoParticleFilter.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--IOSvc.Input<span class="o">=</span><span class="nv">$ILDCONFIG_DIR</span>/gen_tau_pi0_REC.edm4hep.root
</pre></div>
</div>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
RESOURCE_DIR</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>k4run<span class="w"> </span>GaudiKinfit/options/runRecoParticleFilter.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--IOSvc.Input<span class="o">=</span><span class="nv">$RESOURCE_DIR</span>/gen_tau_pi0_250-SetA_2f_leptonic_eL_pR_REC_0.edm4hep.root
</pre></div>
</div>
</div>
</div>
<p>By default this should produce a <code class="docutils literal notranslate"><span class="pre">photon_candidates.root</span></code> output file that you
can inspect either via <code class="docutils literal notranslate"><span class="pre">podio-dump</span></code>, <code class="docutils literal notranslate"><span class="pre">root</span></code> or you can also poke at it
interactively using e.g. <code class="docutils literal notranslate"><span class="pre">ipython</span></code> to quickly check whether things are working
as expected.</p>
<section id="id2">
<h4>Tasks<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<p>The main tasks (as also outlined in the file) are</p>
<ul class="simple">
<li><p>Configure the <code class="docutils literal notranslate"><span class="pre">ApplicationMgr</span></code> to run your algorithm</p></li>
<li><p>Complete the configuration of the <code class="docutils literal notranslate"><span class="pre">photon_filter</span></code> algorithm according to the
<em>Properties</em> (specifically their names) you have defined in the c++
implementation.</p></li>
<li><p>Configure the <code class="docutils literal notranslate"><span class="pre">iosvc</span></code> to store only the collections you want at the end (there
are multiple ways to achieve this)</p></li>
</ul>
</section>
<section id="hints-and-some-common-pitfals">
<span id="hints-pitfalls-filter-runtime"></span><h4>Hints and some common pitfals<a class="headerlink" href="#hints-and-some-common-pitfals" title="Link to this heading"></a></h4>
<p>Again it’s possible that you encounter some issues. For the most common ones we
have collected some hints on how to detect and subsequently fix them.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
ImportError: cannot import name ‘XYZ’ from ‘Gaudi.Configurables’ (unknown location)<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The most likely reason for this is that you have either</p>
<ul class="simple">
<li><p class="sd-card-text">not installed your algorithm yet,</p></li>
<li><p class="sd-card-text">or that you have not yet setup the environment correctly</p></li>
</ul>
<p class="sd-card-text">See <a class="reference internal" href="#setting-up-environment"><span class="std std-ref">how to do that here</span></a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 277, in &lt;module&gt;</span>
<span class="go">    main()</span>
<span class="go">    ~~~~^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 206, in main</span>
<span class="go">    load_file(file)</span>
<span class="go">    ~~~~~~~~~^^^^^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/python/k4FWCore/utils.py&quot;, line 95, in load_file</span>
<span class="go">    exec(compile(code, ofile.name, &quot;exec&quot;), namespace)</span>
<span class="go">    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="go">  File &quot;GaudiKinfit/options/runRecoParticleFilter.py&quot;, line 5, in &lt;module&gt;</span>
<span class="go">    from Configurables import RecoParticleFilter, EventDataSvc</span>
<span class="go">ImportError: cannot import name &#39;RecoParticleFilter&#39; from &#39;Gaudi.Configurables&#39; (unknown location)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I have setup the environment and installed the algorithm, but I still see the same ImportError<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">When you have <a class="reference internal" href="#setting-up-environment"><span class="std std-ref">setup the environment and installed your algorithm
correctly</span></a> and you still see the import error you are
most likely not yet declaring your algorihm as a Gaudi component or you have a
type somewhere. In order to declare your algorithm as a Gaudi component, put</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DECLARE_COMPONENT</span><span class="p">(</span><span class="n">RecoParticleFilter</span><span class="p">)</span><span class="w">  </span><span class="c1">// &lt;--- replace with your algorithm name</span>
</pre></div>
</div>
<p class="sd-card-text">into the <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file to make it known as a component to Gaudi.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
NameError: name ‘XYZ’ is not defined<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">This almost always means that you have missed to <code class="docutils literal notranslate"><span class="pre">import</span></code> an algorithm from
<code class="docutils literal notranslate"><span class="pre">Configurables</span></code> (or that you are trying to use something else that you have not
<code class="docutils literal notranslate"><span class="pre">import</span></code>ed). Other common issues that show like this are typos.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 277, in &lt;module&gt;</span>
<span class="go">    main()</span>
<span class="go">    ~~~~^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 206, in main</span>
<span class="go">    load_file(file)</span>
<span class="go">    ~~~~~~~~~^^^^^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/python/k4FWCore/utils.py&quot;, line 95, in load_file</span>
<span class="go">    exec(compile(code, ofile.name, &quot;exec&quot;), namespace)</span>
<span class="go">    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="go">  File &quot;GaudiKinfit/options/runGammaGammaCandidateFinder.py&quot;, line 17, in &lt;module&gt;</span>
<span class="go">    gamma_gamma_finder = GammaGammaCandidateFinder(&quot;Pi0Finder&quot;)</span>
<span class="go">                         ^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="go">NameError: name &#39;GammaGammaCandidateFinder&#39; is not defined</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
ValueError: received an instance of XYZ, but ZYX  expected for property BAR<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">In case you see an error like this there is a type mismatch between the expected
property value and the one you specified in the options file. The most likely
case in this tutorial is trying to specify an input or output collection with a
single string argument, which will result in an error like below</p>
<p class="sd-card-text">The proper way to specify (even a single) input or output collection via a list
of strings, i.e.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">photon_filter</span><span class="o">.</span><span class="n">InputCollection</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;PandoraPFOs&quot;</span><span class="p">]</span>
<span class="n">photon_filter</span><span class="o">.</span><span class="n">OutputCollection</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;FilteredCollection&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 277, in &lt;module&gt;</span>
<span class="go">    main()</span>
<span class="go">    ~~~~^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&quot;, line 206, in main</span>
<span class="go">    load_file(file)</span>
<span class="go">    ~~~~~~~~~^^^^^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/python/k4FWCore/utils.py&quot;, line 95, in load_file</span>
<span class="go">    exec(compile(code, ofile.name, &quot;exec&quot;), namespace)</span>
<span class="go">    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="go">  File &quot;GaudiKinfit/options/runRecoParticleFilter.py&quot;, line 10, in &lt;module&gt;</span>
<span class="go">    photon_filter.InputCollection = &quot;PandoraPFOs&quot;</span>
<span class="go">    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/gaudi/master-wsj4hl/python/GaudiKernel/Configurable.py&quot;, line 520, in __setattr__</span>
<span class="go">    super(Configurable, self).__setattr__(name, value)</span>
<span class="go">    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/gaudi/master-wsj4hl/python/GaudiKernel/PropertyProxy.py&quot;, line 155, in __set__</span>
<span class="go">    value = _isCompatible(proptype, value, self.descr.__name__)</span>
<span class="go">  File &quot;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/gaudi/master-wsj4hl/python/GaudiKernel/PropertyProxy.py&quot;, line 69, in _isCompatible</span>
<span class="go">    raise ValueError(errmsg)</span>
<span class="go">ValueError: received an instance of &lt;class &#39;str&#39;&gt;, but &lt;class &#39;list&#39;&gt; expected for property InputCollection</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
My configuration doesn’t produce any output file<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">This might happen if you haven’t configured the <code class="docutils literal notranslate"><span class="pre">Output</span></code> property of the
<code class="docutils literal notranslate"><span class="pre">IOSvc</span></code>. In that case the algorithms will run, but no output file will be
created. You can fix this either in the options file or from the command line</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
options file</label><div class="sd-tab-content docutils">
<p class="sd-card-text">Make sure that something along the lines of the following is in your options file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iosvc</span> <span class="o">=</span> <span class="n">IOSvc</span><span class="p">()</span>
<span class="n">iosvc</span><span class="o">.</span><span class="n">Output</span> <span class="o">=</span> <span class="s2">&quot;outputfile.root&quot;</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-10" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-10">
CLI</label><div class="sd-tab-content docutils">
<p class="sd-card-text">Add the following to the arguments of <code class="docutils literal notranslate"><span class="pre">k4run</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">IOSvc</span><span class="o">.</span><span class="n">Output</span><span class="o">=</span><span class="n">outputfile</span><span class="o">.</span><span class="n">root</span>
</pre></div>
</div>
</div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
ERROR Application Manager Terminated with error code 6<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Whenever your algorithm chain encounters an error at runtime you are likely to
see this as the last line of the outptu of the <code class="docutils literal notranslate"><span class="pre">k4run</span></code> command. In this case the
next step is to figure out what the error(s) that occured actually are. In order
to do this you will have to read the complete output <strong>starting at the top</strong> and
trying to find the first <code class="docutils literal notranslate"><span class="pre">FATAL</span></code> or <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> log output. This should already tell
you which algorithm (instance) was responsible and also might give you a hint at
the problem already.</p>
<p class="sd-card-text">The most common causes for errors are:</p>
<ul class="simple">
<li><p class="sd-card-text">An expected input collection is not found in the TES</p></li>
<li><p class="sd-card-text">an uncaught exception escapes from an algorithm (this can happen everywhere,
including <code class="docutils literal notranslate"><span class="pre">initialize</span></code> and <code class="docutils literal notranslate"><span class="pre">finalize</span></code>)</p></li>
<li><p class="sd-card-text">a <code class="docutils literal notranslate"><span class="pre">StatusCode::FAILURE</span></code> is returned (most likely from <code class="docutils literal notranslate"><span class="pre">initialize</span></code> or
<code class="docutils literal notranslate"><span class="pre">finalize</span></code>)</p></li>
</ul>
<p class="sd-card-text">In some cases it might be useful to increase the <code class="docutils literal notranslate"><span class="pre">OutputLevel</span></code> of an algorithm
once it has been identified which one is responsible for the error. This can
give further insights into why something is failing.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
ERROR Immutable exceptions can only be added to subset collections<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">This will occur if you do not make the output collection of the
<code class="docutils literal notranslate"><span class="pre">RecoParticleFilter</span></code> algorithm a <em>subset collection</em>. Since elements in EDM4hep
belong to a single collection exclusively, we can only store a reference to them
in a subset collection. The solution to this is to simply create your output
collection as a subset collection</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">ReconstructedParticleCollection</span><span class="p">{};</span>
<span class="n">ret</span><span class="p">.</span><span class="n">setSubsetCollection</span><span class="p">();</span>
</pre></div>
</div>
<p class="sd-card-text">(Shortened) example output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[...]</span>
<span class="go">ApplicationMgr    SUCCESS </span>
<span class="go">====================================================================================================================================</span>
<span class="go">                                                   Welcome to ApplicationMgr (GaudiCoreSvc v40r0)</span>
<span class="go">                                          running on madlener-Precision-5550 on Sat Oct 11 15:02:41 2025</span>
<span class="go">====================================================================================================================================</span>
<span class="go">ApplicationMgr       INFO Application Manager Configured successfully</span>
<span class="go">k4FWCore__Seque...   INFO Member list: Gaudi::Sequencer/k4FWCore__Algs, Writer/k4FWCore__Writer</span>
<span class="go">k4FWCore__Algs       INFO Member list: Reader/k4FWCore__Reader, RecoParticleFilter/PhotonFilter</span>
<span class="go">IOSvc                INFO Setting metadata frame</span>
<span class="go">PhotonFilter        DEBUG Property update for OutputLevel : new value = 2</span>
<span class="go">PhotonFilter        DEBUG input handles: 1</span>
<span class="go">PhotonFilter        DEBUG output handles: 1</span>
<span class="go">PhotonFilter        DEBUG data dependencies:</span>
<span class="go">  + INPUT  &#39;PandoraPFOs&#39;</span>
<span class="go">  + OUTPUT &#39;FilteredParticles&#39;</span>
<span class="go">ApplicationMgr       INFO Application Manager Initialized successfully</span>
<span class="go">ApplicationMgr       INFO Application Manager Started successfully</span>
<span class="go">PhotonFilter        FATAL Standard std::exception is caught in sysExecute</span>
<span class="go">PhotonFilter        ERROR Immutable objects can only be added to subset collections</span>
<span class="go">k4FWCore__Algs      FATAL Standard std::exception is caught in sysExecute</span>
<span class="go">k4FWCore__Algs      ERROR Immutable objects can only be added to subset collections</span>
<span class="go">k4FWCore__Seque...  FATAL Standard std::exception is caught in sysExecute</span>
<span class="go">k4FWCore__Seque...  ERROR Immutable objects can only be added to subset collections</span>
<span class="go">EventLoopMgr        FATAL .executeEvent(): Standard std::exception thrown by k4FWCore__Sequencer</span>
<span class="go">EventLoopMgr        ERROR Immutable objects can only be added to subset collections</span>
<span class="go">EventLoopMgr      WARNING Execution of algorithm k4FWCore__Sequencer failed</span>
<span class="go">EventLoopMgr        ERROR Error processing event loop.</span>
<span class="go">EventLoopMgr        ERROR Terminating event processing loop due to errors</span>
<span class="go">EventLoopMgr        ERROR Terminating event processing loop due to errors</span>
<span class="go">ApplicationMgr       INFO Application Manager Stopped successfully</span>
<span class="go">ApplicationMgr       INFO Application Manager Finalized successfully</span>
<span class="go">ApplicationMgr      ERROR Application Manager Terminated with error code 6</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" id="output-commands-config">
<summary class="sd-summary-title sd-card-header">
My output file doesn’t have any collections stored<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">This will happen if you configure the <code class="docutils literal notranslate"><span class="pre">IOSvc.outputCommands</span></code> inappropriately. In
this case we might have also lured you into a little trap, by explicitly
dropping all collections from the output.</p>
<p class="sd-card-text">In order to fix this there are several options. You can</p>
<ul class="simple">
<li><p class="sd-card-text">configure the <code class="docutils literal notranslate"><span class="pre">IOSvc</span></code> to keep everything via <code class="docutils literal notranslate"><span class="pre">&quot;keep</span> <span class="pre">*&quot;</span></code> (this is also the
default if you don’t do anything else)</p></li>
<li><p class="sd-card-text">Make sure that your desired collections are kept, i.e.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iosvc</span><span class="o">.</span><span class="n">outputCommands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;drop *&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;keep FilteredPhotons&quot;</span><span class="p">,</span>  <span class="c1"># &lt;-- Assuming this is the output of your algorithm</span>
<span class="p">]</span>
</pre></div>
</div>
<p class="sd-card-text">The commands here are executed in the order they are specified. Hence, this will
only store your newly created collection into the output file.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" id="algorithm-in-top-alg">
<summary class="sd-summary-title sd-card-header">
My algorithm doesn’t seem to run<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Most likely you have simply not added it to the algorithms to actually run in
the <code class="docutils literal notranslate"><span class="pre">ApplicationMgr</span></code> and simply need to add it there</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alg_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">photon_filter</span><span class="p">]</span>
<span class="n">ApplicationMgr</span><span class="p">(</span>
  <span class="n">TopAlg</span><span class="o">=</span><span class="n">alg_list</span><span class="p">,</span>
  <span class="c1"># Other arguments unchanged</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">You can verify that your algorithm is configured to run by checking the first
line of the <code class="docutils literal notranslate"><span class="pre">k4run</span></code> output:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-11">
Incorrectly configured</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[k4run - INFO] k4run.main: </span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-12" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-12">
Correctly configured</label><div class="sd-tab-content docutils">
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[k4run - INFO] k4run.main: --&gt; PhotonFilter</span>
</pre></div>
</div>
</div>
</div>
<p class="sd-card-text">You can also check whether you see the <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> messages from your algorithm in
the output (as we have configured the <code class="docutils literal notranslate"><span class="pre">OutputLevel</span></code> accordingly in the skeleton)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[...]</span>
<span class="go">====================================================================================================================================</span>
<span class="go">                                                   Welcome to ApplicationMgr (GaudiCoreSvc v40r0)</span>
<span class="go">                                          running on madlener-Precision-5550 on Sat Oct 11 15:36:19 2025</span>
<span class="go">====================================================================================================================================</span>
<span class="go">ApplicationMgr       INFO Application Manager Configured successfully</span>
<span class="go">k4FWCore__Seque...   INFO Member list: Gaudi::Sequencer/k4FWCore__Algs, Writer/k4FWCore__Writer</span>
<span class="go">k4FWCore__Algs       INFO Member list: Reader/k4FWCore__Reader, RecoParticleFilter/PhotonFilter</span>
<span class="go">IOSvc                INFO Setting metadata frame</span>
<span class="go">PhotonFilter        DEBUG Property update for OutputLevel : new value = 2</span>
<span class="go">PhotonFilter        DEBUG input handles: 1</span>
<span class="go">PhotonFilter        DEBUG output handles: 1</span>
<span class="go">PhotonFilter        DEBUG data dependencies:</span>
<span class="go">  + INPUT  &#39;PandoraPFOs&#39;</span>
<span class="go">  + OUTPUT &#39;FilteredParticles&#39;</span>
<span class="go">[...]</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
My collection is not stored in the output file<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">After you have ensured that <a class="reference internal" href="#output-commands-config"><span class="std std-ref">you do not drop all
collections</span></a> you also need to ensure that your
<a class="reference internal" href="#algorithm-in-top-alg"><span class="std std-ref">algorithm is actually run</span></a>.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
ERROR XYZ : Cannot retrieve ‘FOO’ from transient store<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">You will see this error when you try to use a collection that is not known to
the transient event store (TES) at the point in time when you want to use this
as an <strong>input collection</strong>. This can have several reasons, the most likely ones
are</p>
<ul class="simple">
<li><p class="sd-card-text">You have a typo in the collection name</p></li>
<li><p class="sd-card-text">Another algorithm that produces this collection is only run after your algorithm</p></li>
<li><p class="sd-card-text">The collection is already missing from the input</p></li>
</ul>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
My filtered collection looks “weird”<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">If you inspect the output file using <code class="docutils literal notranslate"><span class="pre">root</span></code> (perfectly fine way to do this) you
see that your newly created output collection looks different than other
<code class="docutils literal notranslate"><span class="pre">ReconstructedParticleCollections</span></code> (e.g. <em>PandoraPFOs</em>). Most importantly</p>
<ul class="simple">
<li><p class="sd-card-text">this collection has only one branch compared to several sub-branches for
“normal” collections</p></li>
<li><p class="sd-card-text">the branch is named <code class="docutils literal notranslate"><span class="pre">&lt;collection-name&gt;_objIdx</span></code></p></li>
</ul>
<p class="sd-card-text">The reason for this is that you had to make this collection a <em>subset
collection</em> (in order to keep all the relations and to not duplicate data) in
the algorithm implementation.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I get a crash when I try to look at the output file<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The most likely reason for this is that you <strong>do not store the original
collection into which the subset collection points</strong>. Hence, a fix could be to
use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">iosvc</span><span class="o">.</span><span class="n">outputCommands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;drop *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keep FilteredPhotons&quot;</span><span class="p">,</span> <span class="c1"># &lt;-- your *subset* collection</span>
    <span class="s2">&quot;keep PandoraPFOs&quot;</span><span class="p">,</span>     <span class="c1"># &lt;-- the collection where the photons actually live</span>
<span class="p">]</span>
</pre></div>
</div>
<p class="sd-card-text">The actual symptom for this will likely look different depending on how you try
to do this</p>
<p class="sd-card-text">Depending on how you try this the overall structure of the output might differ
but there will be some mention of a <code class="docutils literal notranslate"><span class="pre">bad_function_all</span></code>. We are currently
tracking this in <a class="reference external" href="https://github.com/AIDASoft/podio/issues/859">podio#859</a>.</p>
</div>
</details></section>
</section>
<section id="writing-the-gammagammacandidatefinder-algorithm">
<h3>Writing the <code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> algorithm<a class="headerlink" href="#writing-the-gammagammacandidatefinder-algorithm" title="Link to this heading"></a></h3>
<p>Now that you have had some exercise in getting the boilerplate part of
Functional algorithms right, the next step will be to implement a slightly more
involved algorithm, specifically the <code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code>. We have again
provided a (not yet compiling) version of the algorithm in
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/components/GammaGammaCandidateFinder.{h,c}pp</span></code>. Also for testing
there is again a skeleton options file that still needs to be completed for this
part into <code class="docutils literal notranslate"><span class="pre">GaudiKinfit/options/runGammaGammaCandidateFinder.py</span></code>.</p>
<p>The desired functionality of this algorithm should be to</p>
<ul class="simple">
<li><p>take a configurable resonance mass and PDG value (and optionally a selection
window for di-photon candidates around the resonance mass),</p></li>
<li><p>combine all input photons (the outputs of the filter algorithm we just
developed),</p></li>
<li><p>do a kinematic fit on all combinations using the input resonance mass as a
mass constraint,</p></li>
<li><p>and finally put all of the combinations that pass (the configurable minimal
fit probability threshold) into the output.</p></li>
</ul>
<p>For running this configuration use either the output of the ILD reconstruction
of the first part or the REC file that is available from the <code class="docutils literal notranslate"><span class="pre">RESOURCE_DIR</span></code></p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-13">
ILD reconstruction</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>k4run<span class="w"> </span>GaudiKinfit/options/runGammaGammaCandidateFinder.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--IOSvc.Input<span class="o">=</span><span class="nv">$ILDCONFIG_DIR</span>/gen_tau_pi0_REC.edm4hep.root
</pre></div>
</div>
</div>
<input id="sd-tab-item-14" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-14">
RESOURCE_DIR</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>k4run<span class="w"> </span>GaudiKinfit/options/runGammaGammaCandidateFinder.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--IOSvc.Input<span class="o">=</span><span class="nv">$RESOURCE_DIR</span>/gen_tau_pi0_250-SetA_2f_leptonic_eL_pR_REC_0.edm4hep.root
</pre></div>
</div>
</div>
</div>
<section id="id3">
<h4>Tasks<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>The skeleton provides some structure and partially implemented helper
functionality. Again, follow the <em>TODO</em> items in the files. In rough order the
recommended steps are</p>
<ul class="simple">
<li><p>Enable the compilation of the <code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> algorithm by
uncommenting the corresponding line in <code class="docutils literal notranslate"><span class="pre">GaudiKinift/CMakeLists.txt</span></code>.</p></li>
<li><p>Fix the compiler error you see by properly instantiating the <code class="docutils literal notranslate"><span class="pre">recoPart</span></code> in
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/components/GammaGammaCandidateFinder.cpp</span></code> on line 127.</p></li>
<li><p>Write the main loop in <code class="docutils literal notranslate"><span class="pre">operator()</span></code> to build the photon combinations and
create a fake <code class="docutils literal notranslate"><span class="pre">FitResult</span></code> (for now only the <code class="docutils literal notranslate"><span class="pre">fittedParticle</span></code> four momentum
vector has to be populated). Pass this <code class="docutils literal notranslate"><span class="pre">FitResult</span></code> to the <code class="docutils literal notranslate"><span class="pre">createParticle</span></code>
function</p></li>
<li><p>Finalize the <code class="docutils literal notranslate"><span class="pre">createParticle</span></code> function</p></li>
<li><p>Finish the options file by instantiating the algorithm and finishing its
configuration.</p>
<ul>
<li><p>Run the algorithm at this stage to check that photon combinations are indeed
happening</p></li>
</ul>
</li>
<li><p>Add the necessary <em>Properties</em> for all the configurable parameters that are
necessary.</p></li>
<li><p>Finalize the implementation of the <code class="docutils literal notranslate"><span class="pre">performKinematicFit</span></code> method and call it
from the main loop in <code class="docutils literal notranslate"><span class="pre">operator()</span></code>. Replace the fake fit result from before
with the actual on (after checking whether the fit probability is good
enough).</p></li>
</ul>
</section>
<section id="hints-and-common-pitfalls">
<h4>Hints and common pitfalls<a class="headerlink" href="#hints-and-common-pitfalls" title="Link to this heading"></a></h4>
<p>In general most of the Gaudi related issues you will probably have already seen
above and the hints <a class="reference internal" href="#hints-pitfalls-filter-build"><span class="std std-ref">here</span></a> and
<a class="reference internal" href="#hints-pitfalls-filter-runtime"><span class="std std-ref">here</span></a> might still prove useful. Some more
specific ones for the actual content of this algorithm are listed here.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I can’t fix the compiler error for recoPart<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">This likely happened because you tried to use a <code class="docutils literal notranslate"><span class="pre">edm4hep::ReconstructedParticle</span></code>
as type. The compiler will yell a lot about (see also below) <em>passing ‘const
XYZ’ as ‘this’ argument discards qualifiers [-fpermissive]</em>. The default handles
in EDM4hep do not allow for mutation. For that you have to create a dedicated
mutable handle via (check also the return type of the method!)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">recoPart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">MutableReconstructedParticle</span><span class="p">{};</span>
</pre></div>
</div>
<p class="sd-card-text">Exerpt of compiler error</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[...]</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp: In member function &#39;edm4hep::MutableReconstructedParticle GammaGammaCandidateFinder::createParticle(const FitResult&amp;, const edm4hep::ReconstructedParticle&amp;, const edm4hep::ReconstructedParticle&amp;) const&#39;:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp:175:17: error: passing &#39;const edm4hep::CovMatrix4f&#39; as &#39;this&#39; argument discards qualifiers [-fpermissive]</span>
<span class="go">  175 |     cov.setValue(vP(0, 0), x, x);</span>
<span class="go">      |     ~~~~~~~~~~~~^~~~~~~~~~~~~~~~</span>
<span class="go">In file included from &lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/edm4hep/main-s2hiv4/include/edm4hep/ReconstructedParticleData.h:6,</span>
<span class="go">                 from &lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/edm4hep/main-s2hiv4/include/edm4hep/ReconstructedParticleObj.h:8,</span>
<span class="go">                 from &lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/edm4hep/main-s2hiv4/include/edm4hep/MutableReconstructedParticle.h:6,</span>
<span class="go">                 from &lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/edm4hep/main-s2hiv4/include/edm4hep/ReconstructedParticleCollection.h:7,</span>
<span class="go">                 from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.hpp:7,</span>
<span class="go">                 from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp:1:</span>
<span class="go">&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/edm4hep/main-s2hiv4/include/edm4hep/CovMatrix4f.h:108:18: note:   in call to &#39;constexpr void edm4hep::CovMatrix4f::setValue(float, DimEnum, DimEnum) [with DimEnum = edm4hep::FourMomCoords]&#39;</span>
<span class="go">  108 |   constexpr void setValue(float value, DimEnum dimI, DimEnum dimJ) {</span>
<span class="go">      |                  ^~~~~~~~</span>

<span class="go">[...]</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I can’t figure out how to construct the fake FitResult<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The <code class="docutils literal notranslate"><span class="pre">FitResult</span></code> has only one member that is interesting for <code class="docutils literal notranslate"><span class="pre">createParticle</span></code>;
<code class="docutils literal notranslate"><span class="pre">fittedParticle</span></code> (a four vector). One way to populate that is</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gamma1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">utils</span><span class="o">::</span><span class="n">p4</span><span class="p">(</span><span class="n">photonCandidates</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">utils</span><span class="o">::</span><span class="n">UseEnergy</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gamma2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">utils</span><span class="o">::</span><span class="n">p4</span><span class="p">(</span><span class="n">photonCandidates</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">edm4hep</span><span class="o">::</span><span class="n">utils</span><span class="o">::</span><span class="n">UseEnergy</span><span class="p">);</span>

<span class="n">FitResult</span><span class="w"> </span><span class="n">fakeResult</span><span class="p">{};</span>
<span class="n">fakeResult</span><span class="p">.</span><span class="n">fittedParticle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gamma1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gamma2</span><span class="p">;</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I get a compiler error when trying to call convertParticle<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">If you get an error like below complaining about a failing conversion, you are
trying to pass in the four vectors for the photons, when instead you should be
passing the actual <code class="docutils literal notranslate"><span class="pre">edm4hep::ReconstructedParticles</span></code> here, i.e.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">particle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createParticle</span><span class="p">(</span><span class="n">fitResult</span><span class="p">,</span><span class="w"> </span><span class="n">photonCandidates</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">photonCandidates</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp: In member function &#39;virtual edm4hep::ReconstructedParticleCollection GammaGammaCandidateFinder::operator()(const edm4hep::ReconstructedParticleCollection&amp;) const&#39;:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp:63:50: error: cannot convert &#39;const ROOT::Math::LorentzVector&lt;ROOT::Math::PxPyPzE4D&lt;double&gt; &gt;&#39; to &#39;const edm4hep::ReconstructedParticle&amp;&#39;</span>
<span class="go">   63 |       output.push_back(createParticle(fitResult, gamma1, gamma2));</span>
<span class="go">      |                                                  ^~~~~~</span>
<span class="go">      |                                                  |</span>
<span class="go">      |                                                  const ROOT::Math::LorentzVector&lt;ROOT::Math::PxPyPzE4D&lt;double&gt; &gt;</span>
<span class="go">In file included from &lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.cpp:1:</span>
<span class="go">&lt;tutorial-prefix&gt;/key4hep-tutorials/gaudi_alg_kinfit/GaudiKinfit/components/GammaGammaCandidateFinder.hpp:48:94: note:   initializing argument 2 of &#39;edm4hep::MutableReconstructedParticle GammaGammaCandidateFinder::createParticle(const FitResult&amp;, const edm4hep::ReconstructedParticle&amp;, const edm4hep::ReconstructedParticle&amp;) const&#39;</span>
<span class="go">   48 |                                                        const edm4hep::ReconstructedParticle&amp; gamma1,</span>
<span class="go">      |                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I get pi0 candidates that have the same photon twice<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Check your loop conditions. The nested loops can be constructed such that only
unique combinations are built</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">photonCandidates</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">photonCandidates</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I can’t figure out how to setup the kinematic fit<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">In this case setting up the kinematic fit requires three ingredients</p>
<ul class="simple">
<li><p class="sd-card-text">a <code class="docutils literal notranslate"><span class="pre">MassConstraint</span></code> (where we can directly use the <code class="docutils literal notranslate"><span class="pre">Property</span></code> that we introduced),</p></li>
<li><p class="sd-card-text">and two fit objects, for which in this case we can use <code class="docutils literal notranslate"><span class="pre">JetFitObject</span></code>s. These
take as inputs the photon kinematics in <em>E, theta, phi$</em> coordinates as well
as the errors on these. The final argument is the mass (i.e. <code class="docutils literal notranslate"><span class="pre">0</span></code>) in our case.</p></li>
</ul>
<p class="sd-card-text">After these have been defined they have to be added to the <code class="docutils literal notranslate"><span class="pre">fitter</span></code> using
<code class="docutils literal notranslate"><span class="pre">addConstraint</span></code> and <code class="docutils literal notranslate"><span class="pre">addFitObject</span></code> respectively. Additionally the two photons
also have to be associated to the mass constraint via <code class="docutils literal notranslate"><span class="pre">addToFOList</span></code>.</p>
<p class="sd-card-text">The final sequence will look something like this</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MassConstraint</span><span class="w"> </span><span class="nf">mc</span><span class="p">(</span><span class="n">m_resonanceMass</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>

<span class="n">JetFitObject</span><span class="w"> </span><span class="n">j1</span><span class="p">(</span><span class="n">gamma1</span><span class="p">.</span><span class="n">E</span><span class="p">(),</span><span class="w"> </span><span class="n">gamma1</span><span class="p">.</span><span class="n">Theta</span><span class="p">(),</span><span class="w"> </span><span class="n">gamma1</span><span class="p">.</span><span class="n">Phi</span><span class="p">(),</span><span class="w"> </span>
<span class="w">                </span><span class="mf">0.16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma1</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma1</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma1</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span>
<span class="w">                </span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">JetFitObject</span><span class="w"> </span><span class="n">j2</span><span class="p">(</span><span class="n">gamma2</span><span class="p">.</span><span class="n">E</span><span class="p">(),</span><span class="w"> </span><span class="n">gamma2</span><span class="p">.</span><span class="n">Theta</span><span class="p">(),</span><span class="w"> </span><span class="n">gamma2</span><span class="p">.</span><span class="n">Phi</span><span class="p">(),</span><span class="w"> </span>
<span class="w">                </span><span class="mf">0.16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma2</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma2</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span><span class="mf">0.001</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gamma2</span><span class="p">.</span><span class="n">E</span><span class="p">()),</span><span class="w"> </span>
<span class="w">                </span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">mc</span><span class="p">.</span><span class="n">addToFOList</span><span class="p">(</span><span class="n">j1</span><span class="p">);</span>
<span class="n">mc</span><span class="p">.</span><span class="n">addToFOList</span><span class="p">(</span><span class="n">j2</span><span class="p">);</span>

<span class="k">auto</span><span class="w"> </span><span class="n">pfitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createFitter</span><span class="p">();</span>
<span class="n">BaseFitter</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">pfitter</span><span class="p">;</span>

<span class="n">fitter</span><span class="p">.</span><span class="n">addFitObject</span><span class="p">(</span><span class="n">j1</span><span class="p">);</span>
<span class="n">fitter</span><span class="p">.</span><span class="n">addFitObject</span><span class="p">(</span><span class="n">j2</span><span class="p">);</span>
<span class="n">fitter</span><span class="p">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">mc</span><span class="p">);</span>
</pre></div>
</div>
</div>
</details></section>
</section>
<section id="pi0-gammagamma-analysis">
<h3>Pi0 / GammaGamma analysis<a class="headerlink" href="#pi0-gammagamma-analysis" title="Link to this heading"></a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">analysis</span></code> folder we have prepared some skeleton scripts (in various
different flavours) to make some quick plots from the output files we have just
created. They contain a minor task of adding an additional histogram, but are
runnable without any modifications and will give you a plot to look at. Again
you can find complete solutions in the <code class="docutils literal notranslate"><span class="pre">.solution/analysis</span></code> folder.</p>
<p>For running any of them choose your favorite version and go with that.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-15" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-15">
C++ interface</label><div class="sd-tab-content docutils">
<p>In this case you have to build the executable first. We have added a minimal
<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file for that. (This is generic enough to also serve as a
simple copy-paste template for your work)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>-B<span class="w"> </span>analysis/build<span class="w"> </span>-S<span class="w"> </span>analysis
cmake<span class="w"> </span>--build<span class="w"> </span>analysis/build
</pre></div>
</div>
<p>Whenever you change <code class="docutils literal notranslate"><span class="pre">analysis/make_pi0_hists.cpp</span></code> rerun <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">analysis/build</span></code>.</p>
<p>To run the program do</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analysis/build/make_pi0_hists<span class="w"> </span>pi0_candidates.root
</pre></div>
</div>
<p>(assuming you haven’t changed the output filename in
<code class="docutils literal notranslate"><span class="pre">runGammaGammaCandidateFinder.py</span></code>).</p>
</div>
<input id="sd-tab-item-16" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-16">
C++ interface (ROOT macro)</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root<span class="w"> </span>-l<span class="w"> </span>-q<span class="w"> </span>analysis/make_pi0_hists.C
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You might need to change the filename that is passed to <code class="docutils literal notranslate"><span class="pre">podio::makeReader</span></code> if
you have changed it in the exercise before.</p>
</div>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-7" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-17">
Python interface</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>analysis/make_pi0_hits.py<span class="w"> </span>pi0_candidates.root
</pre></div>
</div>
<p>(assuming you haven’t changed the output filename in
<code class="docutils literal notranslate"><span class="pre">runGammaGammaCandidateFinder.py</span></code>).</p>
</div>
</div>
<p>All of these options produce an output root file with histograms stored in them.
We also provide a helper script to save them as <code class="docutils literal notranslate"><span class="pre">pdf</span></code>s:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>analysis/make_plots.py<span class="w"> </span>&lt;output-file-from-above&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.solution/analysis</span></code> folder also contains an example of how to use <code class="docutils literal notranslate"><span class="pre">uproot</span></code>
to read EDM4hep files.</p>
</section>
<section id="replace-wrapped-processor-with-new-algorithms">
<h3>Replace wrapped processor with new algorithms<a class="headerlink" href="#replace-wrapped-processor-with-new-algorithms" title="Link to this heading"></a></h3>
<p>Now that we have verified that our algorithm is working as expected we can try
and exchange it in the standard ILD reconstruction. This should be rather
straight forward as the only things we have to do now is:</p>
<ul class="simple">
<li><p>Copy the necessary configuration from
<code class="docutils literal notranslate"><span class="pre">GaudiKinfit/options/runGammaGammaCandidateFinder.py</span></code> to
<code class="docutils literal notranslate"><span class="pre">HighLevelReco/HighLevelReco.py</span></code> in <code class="docutils literal notranslate"><span class="pre">$ILDCONFIG_DIR</span></code>.</p></li>
<li><p>Make sure to insert both, the filter and the algorithm that does the kinematic
fit into the <code class="docutils literal notranslate"><span class="pre">HighLevelRecoSequence</span></code> (at the right spot).</p></li>
</ul>
<p>Thanks to the use of the <code class="docutils literal notranslate"><span class="pre">IOHandlerHelper</span></code> the necessary EDM4hep -&gt; LCIO (and
vice versa) converters should be automatically inserted and you should be able
to run the reconstruction chain with the new algorithms immediately<a class="footnote-reference brackets" href="#id7" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p>
<section id="id5">
<h4>Hints and common pitfalls<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
I get a segmentation violation after replacing the processor with the algorithm(s)<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">TL;DR: There might be a symbol name clash between the Marlin processor and the
Gaudi algorithm that we have just created. Both are called
<code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> and the dynamic linker will simply pick one of them
and essentially ignore the other.</p>
<p class="sd-card-text">The fix is simple: Rename your algorithm (the actual class name!) to something
that doesn’t clash.</p>
</div>
<p class="sd-card-text"><strong>Longer explanation and example crash</strong></p>
<p class="sd-card-text">If you have not changed the name of the algorithm from the skeleton version you
will almost certainly run into a segmentation violation in the <em>MyEtaFinder</em>
(see below). But how does this make sense? The segmentation violation seems to
happen inside the <em>MyEtaFinder</em>, a Marlin processor. Looking into the stacktrace
a bit more we see that it’s actually in
<code class="docutils literal notranslate"><span class="pre">MarlinProcessorWrapper::instantiateProcessor</span></code> (see <em>Frame #8</em> in the
stacktrace. How can this be? We haven’t touched any of that in this tutorial.</p>
<p class="sd-card-text">While this can, in general, have a myriad of reasons which are usually quite
hard to debug and figure out. In this case we have purposefully set you up for a
failure that we think might happen during the transition period. Having
experienced this issue first hand will hopefully make you think back to this
tutorial and give you at least some easy to try approach to fix this issue.</p>
<p class="sd-card-text">The technical reason is that both Gaudi and Marlin use a plugin system and they
load libraries dynamically at runtime. In this case <strong>Gaudi does this before
Marlin</strong>. Since the <em>MarlinReco</em> library and the one that we just built for the
tutorial both define the same <code class="docutils literal notranslate"><span class="pre">GammaGammaCandiateFinder</span></code> symbol name only one of
them will be available. On Linux systems it will be the one that is loaded first
(i.e. Gaudi in our case). Since <em>k4MarlinWrapper</em> still uses pretty much all of
the Marlin machinery, at some point it will try to use the
<code class="docutils literal notranslate"><span class="pre">GammaGammaCandidateFinder</span></code> <em>as if it were a Marlin processor</em>. However, since
it actually is the Gaudi algorithm that we just wrote trying to instantiate it
as a Marlin processor won’t work and thus we get the segmentation violation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">This will happen if</p>
<ul class="simple">
<li><p class="sd-card-text">you have a Marlin processor and a Gaudi algorithm with the same <strong>symbol
name</strong> (i.e. class name),</p></li>
<li><p class="sd-card-text"><strong>and</strong> you try to run them in the same chain.</p></li>
</ul>
<p class="sd-card-text">Nevertheless we recommend to try and avoid such naming clashes wherever possible</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[...]</span>
<span class="go">MyphotonCorrect...   INFO Init processor</span>
<span class="go">MyEtaFinder          INFO Parameter values for: MyEtaFinder of type GammaGammaCandidateFinder</span>
<span class="go">TUnixSystem::Di...  FATAL segmentation violation</span>



<span class="go">===========================================================</span>
<span class="go">There was a crash.</span>
<span class="go">This is the entire stack trace of all threads:</span>
<span class="go">===========================================================</span>
<span class="gp">#</span><span class="m">0</span><span class="w">  </span>0x00007b293e1107d7<span class="w"> </span><span class="k">in</span><span class="w"> </span>__GI___wait4<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">849797</span>,<span class="w"> </span><span class="nv">stat_loc</span><span class="o">=</span>stat_loc
<span class="go">entry=0x7ffd4a3a81b8, options=options</span>
<span class="go">entry=0, usage=usage</span>
<span class="go">entry=0x0) at ../sysdeps/unix/sysv/linux/wait4.c:30</span>
<span class="gp">#</span><span class="m">1</span><span class="w">  </span>0x00007b293e11091b<span class="w"> </span><span class="k">in</span><span class="w"> </span>__GI___waitpid<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">stat_loc</span><span class="o">=</span>stat_loc
<span class="go">entry=0x7ffd4a3a81b8, options=options</span>
<span class="go">entry=0) at ./posix/waitpid.c:38</span>
<span class="gp">#</span><span class="m">2</span><span class="w">  </span>0x00007b293e0585bb<span class="w"> </span><span class="k">in</span><span class="w"> </span>do_system<span class="w"> </span><span class="o">(</span><span class="nv">line</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>../sysdeps/posix/system.c:172
<span class="gp">#</span><span class="m">3</span><span class="w">  </span>0x00007b293b92416a<span class="w"> </span><span class="k">in</span><span class="w"> </span>TUnixSystem::Exec<span class="w"> </span><span class="o">(</span><span class="nv">shellcmd</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">this</span><span class="o">=</span>0x56e187a221c0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;spack-prefix&gt;/spack-stage/spack-stage-root-6.36.02-5zde5xmrhenapxt4smmop322jkfqs5sx/spack-src/core/unix/src/TUnixSystem.cxx:2157
<span class="gp">#</span><span class="m">4</span><span class="w">  </span>TUnixSystem::StackTrace<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e187a221c0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;spack-prefix&gt;/spack-stage/spack-stage-root-6.36.02-5zde5xmrhenapxt4smmop322jkfqs5sx/spack-src/core/unix/src/TUnixSystem.cxx:2448
<span class="gp">#</span><span class="m">5</span><span class="w">  </span>0x00007b293b923ab4<span class="w"> </span><span class="k">in</span><span class="w"> </span>TUnixSystem::DispatchSignals<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e187a221c0,<span class="w"> </span><span class="nv">sig</span><span class="o">=</span>kSigSegmentationViolation<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;spack-prefix&gt;/spack-stage/spack-stage-root-6.36.02-5zde5xmrhenapxt4smmop322jkfqs5sx/spack-src/core/unix/src/TUnixSystem.cxx:3668
<span class="gp">#</span><span class="m">6</span><span class="w">  </span>&lt;signal<span class="w"> </span>handler<span class="w"> </span>called&gt;
<span class="gp">#</span><span class="m">7</span><span class="w">  </span>0x0000000000000000<span class="w"> </span><span class="k">in</span><span class="w"> </span>??<span class="w"> </span><span class="o">()</span>
<span class="gp">#</span><span class="m">8</span><span class="w">  </span>0x00007b291cdea45a<span class="w"> </span><span class="k">in</span><span class="w"> </span>MarlinProcessorWrapper::instantiateProcessor<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>this
<span class="go">entry=0x56e19a98d7a0, parameters=std::shared_ptr&lt;marlin::StringParameters&gt; (use count 1, weak count 0) = {...}, processorTypeStr=...) at &lt;tutorial-prefix&gt;/k4MarlinWrapper/k4MarlinWrapper/src/components/MarlinProcessorWrapper.cpp:142</span>
<span class="gp">#</span><span class="m">9</span><span class="w">  </span>0x00007b291cdf0787<span class="w"> </span><span class="k">in</span><span class="w"> </span>MarlinProcessorWrapper::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e19a98d7a0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;tutorial-prefix&gt;/k4MarlinWrapper/k4MarlinWrapper/src/components/MarlinProcessorWrapper.cpp:199
<span class="gp">#</span><span class="m">10</span><span class="w"> </span>0x00007b293ce88af8<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Algorithm::sysInitialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e19a98d7a0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Algorithm.cpp:95
<span class="gp">#</span><span class="m">11</span><span class="w"> </span>0x00007b293d061ab8<span class="w"> </span><span class="k">in</span><span class="w"> </span>operator<span class="o">()</span><span class="w"> </span><span class="o">(</span><span class="nv">__closure</span><span class="o">=</span>&lt;synthetic<span class="w"> </span>pointer&gt;,<span class="w"> </span><span class="nv">a</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">b</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:24
<span class="gp">#</span><span class="m">12</span><span class="w"> </span>std::accumulate&lt;__gnu_cxx::__normal_iterator&lt;Gaudi::Algorithm**,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;,<span class="w"> </span>bool,<span class="w"> </span><span class="o">(</span>anonymous<span class="w"> </span>namespace<span class="o">)</span>::for_algorithms&lt;<span class="p">&amp;</span>Gaudi::Algorithm::sysInitialize,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;<span class="o">(</span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="p">&amp;</span><span class="o">)</span>::&lt;lambda<span class="o">(</span>bool,<span class="w"> </span>Gaudi::Algorithm*<span class="o">)</span>&gt;<span class="w"> </span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">__binary_op</span><span class="o">=</span>...,<span class="w"> </span><span class="nv">__init</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">__last</span><span class="o">=</span>...,<span class="w"> </span><span class="nv">__first</span><span class="o">=</span>0x56e19a98d7a0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>/usr/include/c++/13/bits/stl_numeric.h:169
<span class="gp">#</span><span class="m">13</span><span class="w"> </span><span class="o">(</span>anonymous<span class="w"> </span>namespace<span class="o">)</span>::for_algorithms&lt;<span class="p">&amp;</span>Gaudi::Algorithm::sysInitialize,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">c</span><span class="o">=</span>std::vector<span class="w"> </span>of<span class="w"> </span>length<span class="w"> </span><span class="m">63</span>,<span class="w"> </span>capacity<span class="w"> </span><span class="nv">64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>...<span class="o">})</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:23
<span class="gp">#</span><span class="m">14</span><span class="w"> </span>Gaudi::Sequence::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>this
<span class="go">entry=0x56e19a9360f0) at &lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:32</span>
<span class="gp">#</span><span class="m">15</span><span class="w"> </span>0x00007b293d066e08<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Sequencer::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e19a9360f0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequencer.cpp:42
<span class="gp">#</span><span class="m">16</span><span class="w"> </span>0x00007b293ce88af8<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Algorithm::sysInitialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e19a9360f0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Algorithm.cpp:95
<span class="gp">#</span><span class="m">17</span><span class="w"> </span>0x00007b293d061ab8<span class="w"> </span><span class="k">in</span><span class="w"> </span>operator<span class="o">()</span><span class="w"> </span><span class="o">(</span><span class="nv">__closure</span><span class="o">=</span>&lt;synthetic<span class="w"> </span>pointer&gt;,<span class="w"> </span><span class="nv">a</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">b</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:24
<span class="gp">#</span><span class="m">18</span><span class="w"> </span>std::accumulate&lt;__gnu_cxx::__normal_iterator&lt;Gaudi::Algorithm**,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;,<span class="w"> </span>bool,<span class="w"> </span><span class="o">(</span>anonymous<span class="w"> </span>namespace<span class="o">)</span>::for_algorithms&lt;<span class="p">&amp;</span>Gaudi::Algorithm::sysInitialize,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;<span class="o">(</span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="p">&amp;</span><span class="o">)</span>::&lt;lambda<span class="o">(</span>bool,<span class="w"> </span>Gaudi::Algorithm*<span class="o">)</span>&gt;<span class="w"> </span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">__binary_op</span><span class="o">=</span>...,<span class="w"> </span><span class="nv">__init</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">__last</span><span class="o">=</span>...,<span class="w"> </span><span class="nv">__first</span><span class="o">=</span>0x56e19a9360f0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>/usr/include/c++/13/bits/stl_numeric.h:169
<span class="gp">#</span><span class="m">19</span><span class="w"> </span><span class="o">(</span>anonymous<span class="w"> </span>namespace<span class="o">)</span>::for_algorithms&lt;<span class="p">&amp;</span>Gaudi::Algorithm::sysInitialize,<span class="w"> </span>std::vector&lt;Gaudi::Algorithm*&gt;<span class="w"> </span>&gt;<span class="w"> </span><span class="o">(</span><span class="nv">c</span><span class="o">=</span>std::vector<span class="w"> </span>of<span class="w"> </span>length<span class="w"> </span><span class="m">2</span>,<span class="w"> </span>capacity<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>...<span class="o">})</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:23
<span class="gp">#</span><span class="m">20</span><span class="w"> </span>Gaudi::Sequence::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>this
<span class="go">entry=0x56e189977cc0) at &lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequence.cpp:32</span>
<span class="gp">#</span><span class="m">21</span><span class="w"> </span>0x00007b293d066e08<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Sequencer::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e189977cc0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Sequencer.cpp:42
<span class="gp">#</span><span class="m">22</span><span class="w"> </span>0x00007b293ce88af8<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Algorithm::sysInitialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e189977cc0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Algorithm.cpp:95
<span class="gp">#</span><span class="m">23</span><span class="w"> </span>0x00007b293cf626bc<span class="w"> </span><span class="k">in</span><span class="w"> </span>MinimalEventLoopMgr::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>this
<span class="go">entry=0x56e1898d4ab0) at &lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/MinimalEventLoopMgr.cpp:106</span>
<span class="gp">#</span><span class="m">24</span><span class="w"> </span>0x00007b293c3f8e2a<span class="w"> </span><span class="k">in</span><span class="w"> </span>EventLoopMgr::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e1898d4ab0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiCoreSvc/src/ApplicationMgr/EventLoopMgr.cpp:35
<span class="gp">#</span><span class="m">25</span><span class="w"> </span>0x00007b293d06c5de<span class="w"> </span><span class="k">in</span><span class="w"> </span>Service::sysInitialize_imp<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e1898d4ab0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Service.cpp:62
<span class="gp">#</span><span class="m">26</span><span class="w"> </span>0x00007b293e0a1ed3<span class="w"> </span><span class="k">in</span><span class="w"> </span>__pthread_once_slow<span class="w"> </span><span class="o">(</span><span class="nv">once_control</span><span class="o">=</span>0x56e1898d4b40,<span class="w"> </span><span class="nv">init_routine</span><span class="o">=</span>0x7b293c8eb420<span class="w"> </span>&lt;std::__once_proxy<span class="o">()</span>&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>./nptl/pthread_once.c:116
<span class="gp">#</span><span class="m">27</span><span class="w"> </span>0x00007b293d068316<span class="w"> </span><span class="k">in</span><span class="w"> </span>__gthread_once<span class="w"> </span><span class="o">(</span><span class="nv">__func</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">__once</span><span class="o">=</span>0x56e1898d4b40<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>/usr/include/x86_64-linux-gnu/c++/13/bits/gthr-default.h:700
<span class="gp">#</span><span class="m">28</span><span class="w"> </span>std::call_once&lt;void<span class="w"> </span><span class="o">(</span>Service::*<span class="o">)()</span>,<span class="w"> </span>Service*&gt;<span class="w"> </span><span class="o">(</span><span class="nv">__f</span><span class="o">=</span>
<span class="go">0x7ffd4a3ac380: (void (Service::*)(class Service * const)) 0x7b293d06c2c0 &lt;Service::sysInitialize_imp()&gt;, __once=...) at /usr/include/c++/13/mutex:907</span>
<span class="gp">#</span><span class="m">29</span><span class="w"> </span>Service::sysInitialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e1898d4ab0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Service.cpp:34
<span class="gp">#</span><span class="m">30</span><span class="w"> </span>0x00007b293c4139ef<span class="w"> </span><span class="k">in</span><span class="w"> </span>ServiceManager::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e187589020<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiCoreSvc/src/ApplicationMgr/ServiceManager.cpp:246
<span class="gp">#</span><span class="m">31</span><span class="w"> </span>0x00007b293c3cb70d<span class="w"> </span><span class="k">in</span><span class="w"> </span>ApplicationMgr::initialize<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e187b7aac0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiCoreSvc/src/ApplicationMgr/ApplicationMgr.cpp:476
<span class="gp">#</span><span class="m">32</span><span class="w"> </span>0x00007b293cead6d4<span class="w"> </span><span class="k">in</span><span class="w"> </span>Gaudi::Application::run<span class="w"> </span><span class="o">(</span><span class="nv">this</span><span class="o">=</span>0x56e1876d1100<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>&lt;dev-prefix&gt;/Gaudi/GaudiKernel/src/Lib/Application.cpp:83
<span class="gp">#</span><span class="m">33</span><span class="w"> </span>0x00007b293e26c056<span class="w"> </span><span class="k">in</span><span class="w"> </span>ffi_call_unix64<span class="w"> </span><span class="o">()</span><span class="w"> </span>from<span class="w"> </span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/libffi/3.4.8-4ae47v/lib/libffi.so.8
<span class="gp">#</span><span class="m">34</span><span class="w"> </span>0x00007b293e26a2e6<span class="w"> </span><span class="k">in</span><span class="w"> </span>ffi_call_int<span class="w"> </span><span class="o">()</span><span class="w"> </span>from<span class="w"> </span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/libffi/3.4.8-4ae47v/lib/libffi.so.8
<span class="gp">#</span><span class="m">35</span><span class="w"> </span>0x00007b293e26b02e<span class="w"> </span><span class="k">in</span><span class="w"> </span>ffi_call<span class="w"> </span><span class="o">()</span><span class="w"> </span>from<span class="w"> </span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/libffi/3.4.8-4ae47v/lib/libffi.so.8
<span class="gp">#</span><span class="m">36</span><span class="w"> </span>0x00007b293e289d11<span class="w"> </span><span class="k">in</span><span class="w"> </span>_call_function_pointer<span class="w"> </span><span class="o">(</span><span class="nv">argtypecount</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">argcount</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">resmem</span><span class="o">=</span>0x7ffd4a3acae0,<span class="w"> </span><span class="nv">restype</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">atypes</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">avalues</span><span class="o">=</span>0x7ffd4a3acac0,<span class="w"> </span><span class="nv">pProc</span><span class="o">=</span>0x7b293ceaca80<span class="w"> </span>&lt;_py_Gaudi__Application__run<span class="o">(</span>Gaudi::Application*<span class="o">)</span>&gt;,<span class="w"> </span><span class="nv">flags</span><span class="o">=</span><span class="m">4353</span>,<span class="w"> </span><span class="nv">st</span><span class="o">=</span>0x7b293dca16f0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>./Modules/_ctypes/callproc.c:950
<span class="gp">#</span><span class="m">37</span><span class="w"> </span>_ctypes_callproc<span class="w"> </span><span class="o">(</span><span class="nv">st</span><span class="o">=</span>st
<span class="go">entry=0x7b293dca16f0, pProc=&lt;optimized out&gt;, argtuple=argtuple</span>
<span class="go">entry=(95526639702272,), flags=&lt;optimized out&gt;, argtypes=&lt;optimized out&gt;, restype=&lt;optimized out&gt;, checker=&lt;optimized out&gt;) at ./Modules/_ctypes/callproc.c:1301</span>
<span class="gp">#</span><span class="m">38</span><span class="w"> </span>0x00007b293e28339b<span class="w"> </span><span class="k">in</span><span class="w"> </span>PyCFuncPtr_call<span class="w"> </span><span class="o">(</span><span class="nv">self</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">inargs</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">kwds</span><span class="o">=</span>0x0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>./Modules/_ctypes/_ctypes.c:4382
<span class="gp">#</span><span class="m">39</span><span class="w"> </span>0x00007b293e4fc180<span class="w"> </span><span class="k">in</span><span class="w"> </span>_PyObject_MakeTpCall<span class="w"> </span><span class="o">(</span><span class="nv">tstate</span><span class="o">=</span>0x7b293e99d5f0<span class="w"> </span>&lt;_PyRuntime+283024&gt;,<span class="w"> </span><span class="nv">callable</span><span class="o">=</span>callable
<span class="go">entry=&lt;_FuncPtr(__name__=&#39;_py_Gaudi__Application__run&#39;) at remote 0x7b293d8174d0&gt;, args=args</span>
<span class="go">entry=0x7b293eb75358, nargs=1, keywords=keywords</span>
<span class="go">entry=0x0) at Objects/call.c:242</span>
<span class="gp">#</span><span class="m">40</span><span class="w"> </span>0x00007b293e4fc451<span class="w"> </span><span class="k">in</span><span class="w"> </span>_PyObject_VectorcallTstate<span class="w"> </span><span class="o">(</span><span class="nv">kwnames</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">nargsf</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">args</span><span class="o">=</span>0x7b293eb75358,<span class="w"> </span><span class="nv">callable</span><span class="o">=</span>&lt;_FuncPtr<span class="o">(</span><span class="nv">__name__</span><span class="o">=</span><span class="s1">&#39;_py_Gaudi__Application__run&#39;</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d8174d0&gt;,<span class="w"> </span><span class="nv">tstate</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>./Include/internal/pycore_call.h:166
<span class="gp">#</span><span class="m">41</span><span class="w"> </span>0x00007b293e494e09<span class="w"> </span><span class="k">in</span><span class="w"> </span>_PyEval_EvalFrameDefault<span class="w"> </span><span class="o">(</span><span class="nv">tstate</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">frame</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">throwflag</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Python/generated_cases.c.h:813
<span class="gp">#</span><span class="m">42</span><span class="w"> </span>0x00007b293e6551fd<span class="w"> </span><span class="k">in</span><span class="w"> </span>_PyEval_EvalFrame<span class="w"> </span><span class="o">(</span><span class="nv">throwflag</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">frame</span><span class="o">=</span>0x7b293eb75020,<span class="w"> </span><span class="nv">tstate</span><span class="o">=</span>0x7b293e99d5f0<span class="w"> </span>&lt;_PyRuntime+283024&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>./Include/internal/pycore_ceval.h:119
<span class="gp">#</span><span class="m">43</span><span class="w"> </span>_PyEval_Vector<span class="w"> </span><span class="o">(</span><span class="nv">args</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">argcount</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">kwnames</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">locals</span><span class="o">=</span>&lt;code<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df1d080&gt;,<span class="w"> </span><span class="nv">func</span><span class="o">=</span>0x7b293def4d60,<span class="w"> </span><span class="nv">tstate</span><span class="o">=</span>0x7b293e99d5f0<span class="w"> </span>&lt;_PyRuntime+283024&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Python/ceval.c:1816
<span class="gp">#</span><span class="m">44</span><span class="w"> </span>PyEval_EvalCode<span class="w"> </span><span class="o">(</span><span class="nv">co</span><span class="o">=</span>co
<span class="go">entry=&lt;code at remote 0x7b293df1d080&gt;, globals=globals</span>
<span class="go">entry={&#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None, &#39;__package__&#39;: None, &#39;__loader__&#39;: &lt;SourceFileLoader(name=&#39;__main__&#39;, path=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;) at remote 0x7b293dfa63f0&gt;, &#39;__spec__&#39;: None, &#39;__annotations__&#39;: {}, &#39;__builtins__&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;__file__&#39;: &#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, &#39;__cached__&#39;: None, &#39;os&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;sys&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;argparse&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;logging&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;signal&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;warnings&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;Path&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;load_file&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;get_logger&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;set_log_level&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;LOG_LEVELS&#39;: (&#39;VERBOSE&#39;, &#39;DEBUG&#39;, &#39;INFO&#39;, &#39;WARNING&#39;, &#39;ERROR&#39;), &#39;FILTER_GAUDI_PROPS&#39;: [&#39;Ca...(truncated), locals=locals</span>
<span class="go">entry={&#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None, &#39;__package__&#39;: None, &#39;__loader__&#39;: &lt;SourceFileLoader(name=&#39;__main__&#39;, path=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;) at remote 0x7b293dfa63f0&gt;, &#39;__spec__&#39;: None, &#39;__annotations__&#39;: {}, &#39;__builtins__&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;__file__&#39;: &#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, &#39;__cached__&#39;: None, &#39;os&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;sys&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;argparse&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;logging&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;signal&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;warnings&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;Path&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;load_file&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;get_logger&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;set_log_level&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;LOG_LEVELS&#39;: (&#39;VERBOSE&#39;, &#39;DEBUG&#39;, &#39;INFO&#39;, &#39;WARNING&#39;, &#39;ERROR&#39;), &#39;FILTER_GAUDI_PROPS&#39;: [&#39;Ca...(truncated)) at Python/ceval.c:604</span>
<span class="gp">#</span><span class="m">45</span><span class="w"> </span>0x00007b293e6bd4ae<span class="w"> </span><span class="k">in</span><span class="w"> </span>run_eval_code_obj<span class="w"> </span><span class="o">(</span><span class="nv">locals</span><span class="o">={</span><span class="s1">&#39;__name__&#39;</span>:<span class="w"> </span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__package__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__loader__&#39;</span>:<span class="w"> </span>&lt;SourceFileLoader<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dfa63f0&gt;,<span class="w"> </span><span class="s1">&#39;__spec__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__annotations__&#39;</span>:<span class="w"> </span><span class="o">{}</span>,<span class="w"> </span><span class="s1">&#39;__builtins__&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df9d850&gt;,<span class="w"> </span><span class="s1">&#39;__file__&#39;</span>:<span class="w"> </span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span>,<span class="w"> </span><span class="s1">&#39;__cached__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;os&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293de9d580&gt;,<span class="w"> </span><span class="s1">&#39;sys&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df93a10&gt;,<span class="w"> </span><span class="s1">&#39;argparse&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee1bc0&gt;,<span class="w"> </span><span class="s1">&#39;logging&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee38d0&gt;,<span class="w"> </span><span class="s1">&#39;signal&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddcfc40&gt;,<span class="w"> </span><span class="s1">&#39;warnings&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddfb4c0&gt;,<span class="w"> </span><span class="s1">&#39;Path&#39;</span>:<span class="w"> </span>&lt;<span class="nb">type</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x56e1877ab7e0&gt;,<span class="w"> </span><span class="s1">&#39;load_file&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7dbf60&gt;,<span class="w"> </span><span class="s1">&#39;get_logger&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0540&gt;,<span class="w"> </span><span class="s1">&#39;set_log_level&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0040&gt;,<span class="w"> </span><span class="s1">&#39;LOG_LEVELS&#39;</span>:<span class="w"> </span><span class="o">(</span><span class="s1">&#39;VERBOSE&#39;</span>,<span class="w"> </span><span class="s1">&#39;DEBUG&#39;</span>,<span class="w"> </span><span class="s1">&#39;INFO&#39;</span>,<span class="w"> </span><span class="s1">&#39;WARNING&#39;</span>,<span class="w"> </span><span class="s1">&#39;ERROR&#39;</span><span class="o">)</span>,<span class="w"> </span><span class="s1">&#39;FILTER_GAUDI_PROPS&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ca...(truncated), globals={&#39;</span>__name__<span class="s1">&#39;: &#39;</span>__main__<span class="s1">&#39;, &#39;</span>__doc__<span class="s1">&#39;: None, &#39;</span>__package__<span class="s1">&#39;: None, &#39;</span>__loader__<span class="s1">&#39;: &lt;SourceFileLoader(name=&#39;</span>__main__<span class="s1">&#39;, path=&#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;) at remote 0x7b293dfa63f0&gt;, &#39;</span>__spec__<span class="s1">&#39;: None, &#39;</span>__annotations__<span class="s1">&#39;: {}, &#39;</span>__builtins__<span class="s1">&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;</span>__file__<span class="s1">&#39;: &#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;, &#39;</span>__cached__<span class="s1">&#39;: None, &#39;</span>os<span class="s1">&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;</span>sys<span class="s1">&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;</span>argparse<span class="s1">&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;</span>logging<span class="s1">&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;</span>signal<span class="s1">&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;</span>warnings<span class="s1">&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;</span>Path<span class="s1">&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;</span>load_file<span class="s1">&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;</span>get_logger<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;</span>set_log_level<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;</span>LOG_LEVELS<span class="s1">&#39;: (&#39;</span>VERBOSE<span class="s1">&#39;, &#39;</span>DEBUG<span class="s1">&#39;, &#39;</span>INFO<span class="s1">&#39;, &#39;</span>WARNING<span class="s1">&#39;, &#39;</span>ERROR<span class="s1">&#39;), &#39;</span>FILTER_GAUDI_PROPS<span class="s1">&#39;: [&#39;</span>Ca...<span class="o">(</span>truncated<span class="o">)</span>,<span class="w"> </span><span class="nv">co</span><span class="o">=</span>0x7b293df1d080,<span class="w"> </span><span class="nv">tstate</span><span class="o">=</span>0x7b293e99d5f0<span class="w"> </span>&lt;_PyRuntime+283024&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Python/pythonrun.c:1381
<span class="gp">#</span><span class="m">46</span><span class="w"> </span>run_eval_code_obj<span class="w"> </span><span class="o">(</span><span class="nv">tstate</span><span class="o">=</span>0x7b293e99d5f0<span class="w"> </span>&lt;_PyRuntime+283024&gt;,<span class="w"> </span><span class="nv">co</span><span class="o">=</span>0x7b293df1d080,<span class="w"> </span><span class="nv">globals</span><span class="o">={</span><span class="s1">&#39;__name__&#39;</span>:<span class="w"> </span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__package__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__loader__&#39;</span>:<span class="w"> </span>&lt;SourceFileLoader<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dfa63f0&gt;,<span class="w"> </span><span class="s1">&#39;__spec__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__annotations__&#39;</span>:<span class="w"> </span><span class="o">{}</span>,<span class="w"> </span><span class="s1">&#39;__builtins__&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df9d850&gt;,<span class="w"> </span><span class="s1">&#39;__file__&#39;</span>:<span class="w"> </span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span>,<span class="w"> </span><span class="s1">&#39;__cached__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;os&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293de9d580&gt;,<span class="w"> </span><span class="s1">&#39;sys&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df93a10&gt;,<span class="w"> </span><span class="s1">&#39;argparse&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee1bc0&gt;,<span class="w"> </span><span class="s1">&#39;logging&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee38d0&gt;,<span class="w"> </span><span class="s1">&#39;signal&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddcfc40&gt;,<span class="w"> </span><span class="s1">&#39;warnings&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddfb4c0&gt;,<span class="w"> </span><span class="s1">&#39;Path&#39;</span>:<span class="w"> </span>&lt;<span class="nb">type</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x56e1877ab7e0&gt;,<span class="w"> </span><span class="s1">&#39;load_file&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7dbf60&gt;,<span class="w"> </span><span class="s1">&#39;get_logger&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0540&gt;,<span class="w"> </span><span class="s1">&#39;set_log_level&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0040&gt;,<span class="w"> </span><span class="s1">&#39;LOG_LEVELS&#39;</span>:<span class="w"> </span><span class="o">(</span><span class="s1">&#39;VERBOSE&#39;</span>,<span class="w"> </span><span class="s1">&#39;DEBUG&#39;</span>,<span class="w"> </span><span class="s1">&#39;INFO&#39;</span>,<span class="w"> </span><span class="s1">&#39;WARNING&#39;</span>,<span class="w"> </span><span class="s1">&#39;ERROR&#39;</span><span class="o">)</span>,<span class="w"> </span><span class="s1">&#39;FILTER_GAUDI_PROPS&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ca...(truncated), locals={&#39;</span>__name__<span class="s1">&#39;: &#39;</span>__main__<span class="s1">&#39;, &#39;</span>__doc__<span class="s1">&#39;: None, &#39;</span>__package__<span class="s1">&#39;: None, &#39;</span>__loader__<span class="s1">&#39;: &lt;SourceFileLoader(name=&#39;</span>__main__<span class="s1">&#39;, path=&#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;) at remote 0x7b293dfa63f0&gt;, &#39;</span>__spec__<span class="s1">&#39;: None, &#39;</span>__annotations__<span class="s1">&#39;: {}, &#39;</span>__builtins__<span class="s1">&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;</span>__file__<span class="s1">&#39;: &#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;, &#39;</span>__cached__<span class="s1">&#39;: None, &#39;</span>os<span class="s1">&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;</span>sys<span class="s1">&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;</span>argparse<span class="s1">&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;</span>logging<span class="s1">&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;</span>signal<span class="s1">&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;</span>warnings<span class="s1">&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;</span>Path<span class="s1">&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;</span>load_file<span class="s1">&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;</span>get_logger<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;</span>set_log_level<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;</span>LOG_LEVELS<span class="s1">&#39;: (&#39;</span>VERBOSE<span class="s1">&#39;, &#39;</span>DEBUG<span class="s1">&#39;, &#39;</span>INFO<span class="s1">&#39;, &#39;</span>WARNING<span class="s1">&#39;, &#39;</span>ERROR<span class="s1">&#39;), &#39;</span>FILTER_GAUDI_PROPS<span class="s1">&#39;: [&#39;</span>Ca...<span class="o">(</span>truncated<span class="o">))</span><span class="w"> </span>at<span class="w"> </span>Python/pythonrun.c:1348
<span class="gp">#</span><span class="m">47</span><span class="w"> </span>0x00007b293e6bd80f<span class="w"> </span><span class="k">in</span><span class="w"> </span>run_mod<span class="w"> </span><span class="o">(</span><span class="nv">mod</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">filename</span><span class="o">=</span>filename
<span class="go">entry=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, globals=globals</span>
<span class="go">entry={&#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None, &#39;__package__&#39;: None, &#39;__loader__&#39;: &lt;SourceFileLoader(name=&#39;__main__&#39;, path=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;) at remote 0x7b293dfa63f0&gt;, &#39;__spec__&#39;: None, &#39;__annotations__&#39;: {}, &#39;__builtins__&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;__file__&#39;: &#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, &#39;__cached__&#39;: None, &#39;os&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;sys&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;argparse&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;logging&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;signal&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;warnings&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;Path&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;load_file&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;get_logger&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;set_log_level&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;LOG_LEVELS&#39;: (&#39;VERBOSE&#39;, &#39;DEBUG&#39;, &#39;INFO&#39;, &#39;WARNING&#39;, &#39;ERROR&#39;), &#39;FILTER_GAUDI_PROPS&#39;: [&#39;Ca...(truncated), locals=locals</span>
<span class="go">entry={&#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None, &#39;__package__&#39;: None, &#39;__loader__&#39;: &lt;SourceFileLoader(name=&#39;__main__&#39;, path=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;) at remote 0x7b293dfa63f0&gt;, &#39;__spec__&#39;: None, &#39;__annotations__&#39;: {}, &#39;__builtins__&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;__file__&#39;: &#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, &#39;__cached__&#39;: None, &#39;os&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;sys&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;argparse&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;logging&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;signal&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;warnings&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;Path&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;load_file&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;get_logger&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;set_log_level&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;LOG_LEVELS&#39;: (&#39;VERBOSE&#39;, &#39;DEBUG&#39;, &#39;INFO&#39;, &#39;WARNING&#39;, &#39;ERROR&#39;), &#39;FILTER_GAUDI_PROPS&#39;: [&#39;Ca...(truncated), flags=flags</span>
<span class="go">entry=0x7ffd4a3ad188, arena=arena</span>
<span class="go">entry=0x7b293df198f0, interactive_src=0x0, generate_new_source=0) at Python/pythonrun.c:1466</span>
<span class="gp">#</span><span class="m">48</span><span class="w"> </span>0x00007b293e6bf9c8<span class="w"> </span><span class="k">in</span><span class="w"> </span>pyrun_file<span class="w"> </span><span class="o">(</span><span class="nv">flags</span><span class="o">=</span>0x7ffd4a3ad188,<span class="w"> </span><span class="nv">closeit</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">locals</span><span class="o">={</span><span class="s1">&#39;__name__&#39;</span>:<span class="w"> </span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__package__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__loader__&#39;</span>:<span class="w"> </span>&lt;SourceFileLoader<span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;__main__&#39;</span>,<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dfa63f0&gt;,<span class="w"> </span><span class="s1">&#39;__spec__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;__annotations__&#39;</span>:<span class="w"> </span><span class="o">{}</span>,<span class="w"> </span><span class="s1">&#39;__builtins__&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df9d850&gt;,<span class="w"> </span><span class="s1">&#39;__file__&#39;</span>:<span class="w"> </span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span>,<span class="w"> </span><span class="s1">&#39;__cached__&#39;</span>:<span class="w"> </span>None,<span class="w"> </span><span class="s1">&#39;os&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293de9d580&gt;,<span class="w"> </span><span class="s1">&#39;sys&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293df93a10&gt;,<span class="w"> </span><span class="s1">&#39;argparse&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee1bc0&gt;,<span class="w"> </span><span class="s1">&#39;logging&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293dee38d0&gt;,<span class="w"> </span><span class="s1">&#39;signal&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddcfc40&gt;,<span class="w"> </span><span class="s1">&#39;warnings&#39;</span>:<span class="w"> </span>&lt;module<span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293ddfb4c0&gt;,<span class="w"> </span><span class="s1">&#39;Path&#39;</span>:<span class="w"> </span>&lt;<span class="nb">type</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x56e1877ab7e0&gt;,<span class="w"> </span><span class="s1">&#39;load_file&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7dbf60&gt;,<span class="w"> </span><span class="s1">&#39;get_logger&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0540&gt;,<span class="w"> </span><span class="s1">&#39;set_log_level&#39;</span>:<span class="w"> </span>&lt;<span class="k">function</span><span class="w"> </span>at<span class="w"> </span>remote<span class="w"> </span>0x7b293d7f0040&gt;,<span class="w"> </span><span class="s1">&#39;LOG_LEVELS&#39;</span>:<span class="w"> </span><span class="o">(</span><span class="s1">&#39;VERBOSE&#39;</span>,<span class="w"> </span><span class="s1">&#39;DEBUG&#39;</span>,<span class="w"> </span><span class="s1">&#39;INFO&#39;</span>,<span class="w"> </span><span class="s1">&#39;WARNING&#39;</span>,<span class="w"> </span><span class="s1">&#39;ERROR&#39;</span><span class="o">)</span>,<span class="w"> </span><span class="s1">&#39;FILTER_GAUDI_PROPS&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ca...(truncated), globals={&#39;</span>__name__<span class="s1">&#39;: &#39;</span>__main__<span class="s1">&#39;, &#39;</span>__doc__<span class="s1">&#39;: None, &#39;</span>__package__<span class="s1">&#39;: None, &#39;</span>__loader__<span class="s1">&#39;: &lt;SourceFileLoader(name=&#39;</span>__main__<span class="s1">&#39;, path=&#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;) at remote 0x7b293dfa63f0&gt;, &#39;</span>__spec__<span class="s1">&#39;: None, &#39;</span>__annotations__<span class="s1">&#39;: {}, &#39;</span>__builtins__<span class="s1">&#39;: &lt;module at remote 0x7b293df9d850&gt;, &#39;</span>__file__<span class="s1">&#39;: &#39;</span>&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run<span class="s1">&#39;, &#39;</span>__cached__<span class="s1">&#39;: None, &#39;</span>os<span class="s1">&#39;: &lt;module at remote 0x7b293de9d580&gt;, &#39;</span>sys<span class="s1">&#39;: &lt;module at remote 0x7b293df93a10&gt;, &#39;</span>argparse<span class="s1">&#39;: &lt;module at remote 0x7b293dee1bc0&gt;, &#39;</span>logging<span class="s1">&#39;: &lt;module at remote 0x7b293dee38d0&gt;, &#39;</span>signal<span class="s1">&#39;: &lt;module at remote 0x7b293ddcfc40&gt;, &#39;</span>warnings<span class="s1">&#39;: &lt;module at remote 0x7b293ddfb4c0&gt;, &#39;</span>Path<span class="s1">&#39;: &lt;type at remote 0x56e1877ab7e0&gt;, &#39;</span>load_file<span class="s1">&#39;: &lt;function at remote 0x7b293d7dbf60&gt;, &#39;</span>get_logger<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0540&gt;, &#39;</span>set_log_level<span class="s1">&#39;: &lt;function at remote 0x7b293d7f0040&gt;, &#39;</span>LOG_LEVELS<span class="s1">&#39;: (&#39;</span>VERBOSE<span class="s1">&#39;, &#39;</span>DEBUG<span class="s1">&#39;, &#39;</span>INFO<span class="s1">&#39;, &#39;</span>WARNING<span class="s1">&#39;, &#39;</span>ERROR<span class="s1">&#39;), &#39;</span>FILTER_GAUDI_PROPS<span class="s1">&#39;: [&#39;</span>Ca...<span class="o">(</span>truncated<span class="o">)</span>,<span class="w"> </span><span class="nv">start</span><span class="o">=</span><span class="m">257</span>,<span class="w"> </span><span class="nv">filename</span><span class="o">=</span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span>,<span class="w"> </span><span class="nv">fp</span><span class="o">=</span>0x7b293de91b00<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Python/pythonrun.c:1295
<span class="gp">#</span><span class="m">49</span><span class="w"> </span>_PyRun_SimpleFileObject<span class="w"> </span><span class="o">(</span><span class="nv">fp</span><span class="o">=</span>fp
<span class="go">entry=0x56e187654640, filename=filename</span>
<span class="go">entry=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, closeit=closeit</span>
<span class="go">entry=1, flags=flags</span>
<span class="go">entry=0x7ffd4a3ad188) at Python/pythonrun.c:517</span>
<span class="gp">#</span><span class="m">50</span><span class="w"> </span>0x00007b293e6bff80<span class="w"> </span><span class="k">in</span><span class="w"> </span>_PyRun_AnyFileObject<span class="w"> </span><span class="o">(</span><span class="nv">fp</span><span class="o">=</span>0x56e187654640,<span class="w"> </span><span class="nv">filename</span><span class="o">=</span>filename
<span class="go">entry=&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;, closeit=closeit</span>
<span class="go">entry=1, flags=flags</span>
<span class="go">entry=0x7ffd4a3ad188) at Python/pythonrun.c:77</span>
<span class="gp">#</span><span class="m">51</span><span class="w"> </span>0x00007b293e6e9b11<span class="w"> </span><span class="k">in</span><span class="w"> </span>pymain_run_file_obj<span class="w"> </span><span class="o">(</span><span class="nv">skip_source_first_line</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">filename</span><span class="o">=</span><span class="s1">&#39;&lt;spack-prefix&gt;/spackages/skylake-ubuntu24.04-gcc13.3.0/k4fwcore/main-i35biy/bin/k4run&#39;</span>,<span class="w"> </span><span class="nv">program_name</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:410
<span class="gp">#</span><span class="m">52</span><span class="w"> </span>pymain_run_file<span class="w"> </span><span class="o">(</span><span class="nv">config</span><span class="o">=</span>0x7b293e96fce8<span class="w"> </span>&lt;_PyRuntime+96392&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:429
<span class="gp">#</span><span class="m">53</span><span class="w"> </span>pymain_run_python<span class="w"> </span><span class="o">(</span><span class="nv">exitcode</span><span class="o">=</span>0x7ffd4a3ad178<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:696
<span class="gp">#</span><span class="m">54</span><span class="w"> </span>Py_RunMain<span class="w"> </span><span class="o">()</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:775
<span class="gp">#</span><span class="m">55</span><span class="w"> </span>0x00007b293e6ea2fb<span class="w"> </span><span class="k">in</span><span class="w"> </span>pymain_main<span class="w"> </span><span class="o">(</span><span class="nv">args</span><span class="o">=</span>0x7ffd4a3ad2a0<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:805
<span class="gp">#</span><span class="m">56</span><span class="w"> </span>Py_BytesMain<span class="w"> </span><span class="o">(</span><span class="nv">argc</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">argv</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>Modules/main.c:829
<span class="gp">#</span><span class="m">57</span><span class="w"> </span>0x00007b293e02a1ca<span class="w"> </span><span class="k">in</span><span class="w"> </span>__libc_start_call_main<span class="w"> </span><span class="o">(</span><span class="nv">main</span><span class="o">=</span>main
<span class="go">entry=0x56e184bd1060 &lt;main&gt;, argc=argc</span>
<span class="go">entry=8, argv=argv</span>
<span class="go">entry=0x7ffd4a3ad448) at ../sysdeps/nptl/libc_start_call_main.h:58</span>
<span class="gp">#</span><span class="m">58</span><span class="w"> </span>0x00007b293e02a28b<span class="w"> </span><span class="k">in</span><span class="w"> </span>__libc_start_main_impl<span class="w"> </span><span class="o">(</span><span class="nv">main</span><span class="o">=</span>0x56e184bd1060<span class="w"> </span>&lt;main&gt;,<span class="w"> </span><span class="nv">argc</span><span class="o">=</span><span class="m">8</span>,<span class="w"> </span><span class="nv">argv</span><span class="o">=</span>0x7ffd4a3ad448,<span class="w"> </span><span class="nv">init</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">fini</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">rtld_fini</span><span class="o">=</span>&lt;optimized<span class="w"> </span>out&gt;,<span class="w"> </span><span class="nv">stack_end</span><span class="o">=</span>0x7ffd4a3ad438<span class="o">)</span><span class="w"> </span>at<span class="w"> </span>../csu/libc-start.c:360
<span class="gp">#</span><span class="m">59</span><span class="w"> </span>0x000056e184bd1095<span class="w"> </span><span class="k">in</span><span class="w"> </span>_start<span class="w"> </span><span class="o">()</span>
<span class="go">===========================================================</span>

<span class="go">[...]</span>
</pre></div>
</div>
</div>
</details><hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>If you ever are, you can use the
<a class="reference external" href="https://github.com/key4hep/k4-project-template"><code class="docutils literal notranslate"><span class="pre">k4-project-template</span></code></a> to
start from a properly structured template project with the necessary
boilerplate configuration and some examples.</p>
</aside>
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Any statement using <em>should work</em> should make you immediately alert.
Combined it with <em>immediately</em> it’s almost guaranteed to be a trap ;)</p>
</aside>
</aside>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../gaudi_ild_reco/README.html" class="btn btn-neutral float-left" title="Running ILD simulation and reconstruction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../k4marlinwrapper/doc/starterkit/k4MarlinWrapperCLIC/howtoMultithread.html" class="btn btn-neutral float-right" title="How to run multithreading with k4MarlinWrapper (Gaudi)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Key4hep.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>